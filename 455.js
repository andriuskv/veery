"use strict";(globalThis.webpackChunkveery=globalThis.webpackChunkveery||[]).push([[455],{513:(e,t,s)=>{s.d(t,{Z:()=>r});var n=s(294),i=s(353),o=s(461),a=s(893);const r=function({container:e,toggle:t={},body:s,children:r}){const[l,c]=(0,n.useState)({id:(0,i.zO)()}),d=(0,n.useCallback)((function({target:e}){const t=e.closest(".dropdown-container");let s=!0;t?.id===l.id&&(s=!e.closest("[data-dropdown-keep]")&&(e.closest("a")||e.closest(".dropdown-btn")));s&&(u.current&&c({id:l.id,visible:!1,reveal:!1}),window.removeEventListener("click",d))}),[l.id]),u=(0,n.useRef)(!1),p=(0,n.useRef)(null);return(0,n.useEffect)((()=>(u.current=!0,()=>{u.current=!1,window.removeEventListener("click",d)})),[d]),(0,n.useLayoutEffect)((()=>{if(l.reveal){let e=!1;if(l.data){const t=p.current.getBoundingClientRect().height+8;l.data.bottom+t>l.data.height&&l.data.top>t&&(e=!0)}c({...l,onTop:e,visible:!0})}}),[l.reveal]),(0,a.jsxs)("div",{id:l.id,className:`dropdown-container${e?` ${e.className}`:""}${l.visible?" visible":""}`,children:[(0,a.jsx)("button",{className:`btn icon-btn${t.className?` ${t.className}`:""}${l.visible?" active":""}`,onClick:function({currentTarget:e}){let t=null;if(l.visible)window.removeEventListener("click",d);else{const s=e.parentElement,n=function(e){for(;e&&!e.hasAttribute("data-dropdown-parent");)e=e.parentElement;return e}(s);n&&(n.style.position="relative",t={top:s.offsetTop,bottom:s.offsetTop+s.offsetHeight,height:n.scrollTop+n.clientHeight},n.style.position=""),window.addEventListener("click",d)}c({id:l.id,visible:!1,reveal:!l.visible,data:t,onTop:!1})},title:t.title||"More",children:t.body?t.body:(0,a.jsx)(o.Z,{id:t.iconId||"vertical-dots",className:"dropdown-toggle-btn-icon"})}),(0,a.jsx)("div",{ref:p,className:`container dropdown${s?` ${s.className}`:""}${l.reveal?" reveal":""}${l.visible?" visible":""}${l.onTop?" top":""}`,children:r})]})}},455:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var n=s(294),i=s(250),o=s(676),a=s(106),r=s(768),l=s(615),c=s(29),d=s(322),u=s(722),p=s(253),m=s(461),b=s(893);const v=function({playlistId:e,setMessage:t}){const[s,i]=(0,n.useState)(!1),[a,r]=(0,n.useState)(""),l=(0,n.useRef)(0);function c({key:e}){"Escape"===e&&d()}function d(){r(""),t(""),i(!1),(0,o.gI)(""),(0,o.xU)(e)}return(0,n.useEffect)((()=>()=>{r(""),i(!1),(0,o.gI)("")}),[e]),(0,n.useEffect)((()=>(s&&window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)})),[s]),s?(0,b.jsx)("div",{className:"playlist-toolbar-search",children:(0,b.jsxs)("div",{className:"playlist-toolbar-search-input-container",children:[(0,b.jsx)(m.Z,{id:"search",className:"playlist-toolbar-search-input-icon"}),(0,b.jsx)("input",{type:"text",className:"input playlist-toolbar-search-input",placeholder:"Search",value:a,onChange:function({target:s}){r(s.value),(0,o.gI)(s.value),clearTimeout(l.current),l.current=setTimeout((()=>{const n=(0,o.BM)(s.value,e);t(n?"":"No tracks found")}),400)},onKeyDown:function({target:e,key:t}){"Enter"===t&&e.blur()},autoFocus:!0}),(0,b.jsx)("button",{className:"btn icon-btn playlist-toolbar-search-reset-btn",onClick:d,title:"Clear",children:(0,b.jsx)(m.Z,{id:"close"})})]})}):(0,b.jsxs)("button",{className:"btn icon-text-btn",onClick:function(){i(!0)},children:[(0,b.jsx)(m.Z,{id:"search"}),(0,b.jsx)("span",{children:"Search"})]})},y=(0,n.lazy)((()=>s.e(911).then(s.bind(s,911))));const h=function({playlist:e,playlistRef:t,setMessage:s}){const{updatePlaylist:i}=(0,l.K)(),{activePlaylistId:m}=(0,c.n)(),[h,f]=(0,n.useState)(!1);function w(t){const s=t.ctrlKey||t.shiftKey||t.altKey||t.metaKey,{target:n,key:i}=t;if(!(n instanceof HTMLInputElement&&"text"===n.type))if("Delete"!==i||s){if("a"===i&&t.ctrlKey&&(t.preventDefault(),e.tracks.length)){const e=(0,a.jJ)();f(e)}}else j(),f(!1)}function x({detail:e}){f(e)}function g(){f(!1)}function j(){const t=(0,a.eD)(),s=(0,a.YP)(t),n=[];for(const t of e.tracks)s.includes(t.index)||n.push(t);if(i(e.id,{tracks:(0,d.jg)(n)}),(0,a.wR)(t,e),e.id===m){(0,r.X5)(e.id);const t=(0,r.t7)();t&&(0,o.ul)(t.index,e.id)}g()}return(0,n.useEffect)((()=>(window.addEventListener("keydown",w),window.addEventListener("selection",x),()=>{window.removeEventListener("keydown",w),window.removeEventListener("selection",x)})),[e,m]),(0,b.jsxs)("div",{className:"playlist-toolbar",children:[(0,b.jsx)(u.Z,{startViewMode:e.viewMode,changeViewMode:function(s){e.viewMode=s,i(e.id,{viewMode:s}),(0,o.U)(t.current,e)}}),h&&(0,b.jsx)(n.Suspense,{fallback:null,children:(0,b.jsx)(y,{playlist:e,removeSelectedTracks:j,hide:g})}),(0,b.jsx)(v,{playlistId:e.id,setMessage:s}),(0,b.jsx)(p.Z,{playlist:e,playlistRef:t,updateSortedPlaylist:function({sortBy:t,sortOrder:s}){(0,r.ZO)(e.tracks,e.id),i(e.id,{sortBy:t,sortOrder:s})}})]})};const f=function(){const{id:e}=(0,i.UO)(),{playlists:t,updatePlaylist:s}=(0,l.K)(),{activePlaylistId:d,togglePlay:u,playAtIndex:p}=(0,c.n)(),[m,v]=(0,n.useState)(null),[y,f]=(0,n.useState)(!0),[w,x]=(0,n.useState)(""),g=(0,n.useRef)(!1),j=(0,n.useRef)(null);return(0,n.useEffect)((()=>()=>{g.current=!1,x(""),(0,o.yW)()}),[e]),(0,n.useEffect)((()=>{t&&(f(!1),v(t[e]))}),[t,e]),(0,n.useLayoutEffect)((()=>{if(m&&!g.current){if(window.matchMedia("(max-width: 700px)").matches&&"grid"!==m.viewMode)return void s(m.id,{viewMode:"grid"});(0,o.U)(j.current,m),(0,o.O9)(e),g.current=!0}}),[m]),!t||y?null:m?(0,b.jsxs)("div",{className:"playlist"+(m.tracks.length&&!w?"":" empty"),children:[(0,b.jsx)(h,{playlist:m,playlistRef:j,setMessage:x}),(0,b.jsx)("div",{className:"playlist-view",ref:j,onClick:function({target:t,detail:s}){const n=t.closest(".track");if(n)if(2===s){if((0,a.P3)())return;const t=Number(n.getAttribute("data-index"));p(t,e)}else{if(!t.closest(".artwork-btn"))return;const s=Number(n.getAttribute("data-index")),i=(0,r.t7)();i&&d===e&&s===i.index?u():p(s,e)}}}),m.tracks.length?w?(0,b.jsx)("p",{className:"playlist-message",children:w}):null:(0,b.jsx)("p",{className:"playlist-message",children:"Playlist is empty"})]}):(0,b.jsx)("div",{className:"playlist empty",children:(0,b.jsx)("p",{className:"playlist-message",children:"Playlist not found"})})}},253:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(294),i=s(322),o=s(676),a=s(461),r=s(513),l=s(893);const c=function({playlist:e,playlistRef:t,updateSortedPlaylist:s}){const[c,d]=(0,n.useState)({sortBy:e.sortBy,sortOrder:e.sortOrder});function u({target:e}){p(c.sortBy,Number(e.value))}function p(n,a=1){n===c.sortBy&&a===c.sortOrder||(s({sortBy:n,sortOrder:a}),(0,i.Yr)({...e,sortBy:n,sortOrder:a}),d({sortBy:n,sortOrder:a}),(0,o.U)(t.current,e))}return(0,n.useEffect)((()=>{d({sortBy:e.sortBy,sortOrder:e.sortOrder})}),[e]),(0,l.jsxs)(r.Z,{toggle:{body:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Z,{id:"sort"}),(0,l.jsx)("span",{children:"Sort"})]}),className:"icon-text-btn sort-dropdown-toggle-btn"},container:{className:"sort-dropdown-container"},children:[(0,l.jsxs)("div",{className:"sort-dropdown-group",children:[(0,l.jsx)("button",{className:"btn text-btn dropdown-btn sort-dropdown-btn"+("index"===c.sortBy?" active":""),onClick:()=>p("index"),children:"Index"}),(0,l.jsx)("button",{className:"btn text-btn dropdown-btn sort-dropdown-btn"+("title"===c.sortBy?" active":""),onClick:()=>p("title"),children:"Title"}),(0,l.jsx)("button",{className:"btn text-btn dropdown-btn sort-dropdown-btn"+("artist"===c.sortBy?" active":""),onClick:()=>p("artist"),children:"Artist"}),(0,l.jsx)("button",{className:"btn text-btn dropdown-btn sort-dropdown-btn"+("album"===c.sortBy?" active":""),onClick:()=>p("album"),children:"Album"}),(0,l.jsx)("button",{className:"btn text-btn dropdown-btn sort-dropdown-btn"+("duration"===c.sortBy?" active":""),onClick:()=>p("duration"),children:"Duration"})]}),(0,l.jsxs)("div",{className:"sort-dropdown-group",children:[(0,l.jsxs)("label",{className:"dropdown-btn sort-dropdown-radio",children:[(0,l.jsx)("input",{type:"radio",className:"sr-only radio-input",name:"sortOrder",value:"1",onChange:u,checked:1===c.sortOrder}),(0,l.jsx)("div",{className:"radio"}),(0,l.jsx)("span",{className:"radio-label",children:"Ascending"})]}),(0,l.jsxs)("label",{className:"dropdown-btn sort-dropdown-radio",children:[(0,l.jsx)("input",{type:"radio",className:"sr-only radio-input",onChange:u,name:"sortOrder",value:"-1",checked:-1===c.sortOrder}),(0,l.jsx)("div",{className:"radio"}),(0,l.jsx)("span",{className:"radio-label",children:"Descending"})]})]})]})}},722:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(294),i=s(461),o=s(893);const a=function({startViewMode:e,changeViewMode:t,hideMinimal:s=!1}){const[a,r]=(0,n.useState)(e);function l(e){r(e.target.value),t(e.target.value)}return(0,n.useEffect)((()=>{r(e)}),[e]),(0,o.jsxs)("ul",{className:"view-modes",children:[s?null:(0,o.jsx)("li",{className:"view-mode-container",children:(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"radio",className:"sr-only view-mode-radio-input",name:"view-mode",value:"minimal",checked:"minimal"===a,onChange:l}),(0,o.jsx)(i.Z,{id:"minimal",className:"btn icon-btn view-mode-icon",title:"Minimal"})]})}),(0,o.jsx)("li",{className:"view-mode-container",children:(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"radio",className:"sr-only view-mode-radio-input",name:"view-mode",value:"compact",checked:"compact"===a,onChange:l}),(0,o.jsx)(i.Z,{id:"compact",className:"btn icon-btn view-mode-icon",title:"Compact"})]})}),(0,o.jsx)("li",{className:"view-mode-container",children:(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"radio",className:"sr-only view-mode-radio-input",name:"view-mode",value:"grid",checked:"grid"===a,onChange:l}),(0,o.jsx)(i.Z,{id:"grid",className:"btn icon-btn view-mode-icon",title:"Grid"})]})})]})}}}]);