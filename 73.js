"use strict";(globalThis.webpackChunkveery=globalThis.webpackChunkveery||[]).push([[73],{73:(t,n,e)=>{function r(t,n,e){return new Uint8Array(t,n,e)}function i(t,n,e){return t.slice(n,n+e)}function o(t,n){if("little"===n.endian)return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;if(7===n.shiftBase)return t[0]<<21|t[1]<<14|t[2]<<7|t[3];let e=t[1]<<16|t[2]<<8|t[3];return 4===n.byteCount&&(e=t[0]<<24|e),e}function u(t,n="utf-8"){return new TextDecoder(n).decode(t)}function a(t,n){return(n?t.slice(0,Math.min(n,t.size)):t).arrayBuffer()}e.d(n,{A:()=>x});const s=[[11025,12e3,8e3],null,[22050,24e3,16e3],[44100,48e3,32e3]],c=[[384,1152,576],null,[384,1152,576],[384,1152,1152]],f=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,0],l=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,0],h=[[null,l,l,f],null,[null,l,l,f],[null,[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,0],[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,0],[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,0]]];function g(t,n){return t&1<<n}function d(t,n){return o(r(t,n,4),{endian:"big",shiftBase:7})}function b(t,n,e){return 3===e?o(r(t,n,4),{endian:"big"}):d(t,n)}function w(t,n,e,i){const o=r(t,n,e),[a]=o;if(0===a){if(i>0){let t=-1;for(let n=2;n<o.length;n+=1)if(255===o[n-2]&&0===o[n-1]&&254===o[n]){t=n+1;break}if(t>0){return u(o.slice(t).filter((t=>Boolean(t))),"iso-8859-1")}}const t=u(o,"iso-8859-1");return 0===o[o.length-1]?t.slice(1,-1):t.slice(1)}if(1===a){const t=255===o[1]&&254===o[2]?"utf-16le":"utf-16be",n=o.length%2==0?o.slice(3,-1):o.slice(3);"utf-16be"===t&&(n[0]=0);const e=u(n,t);return 0===o[o.length-1]&&0===o[o.length-2]?e.slice(0,-1):e}if(2===a){return u(o.length%2==0?o.slice(1,-1):o.slice(1),"utf-16le")}if(3===a){const t=u(o,"utf-8");return 0===o[o.length-1]?t.slice(1,-1):t.slice(1)}return u(o,"iso-8859-1")}function y(t,n){const e=u(r(t,n,4));return/\w{4}/.test(e)?e:null}function p(t,n){let e=0;for(;t[n];)n+=1,e+=1;return e}function m(t,n,e){let i=1;const o=r(t,n,e),a=p(o,i),s=u(r(t,n+i,a));i+=a+2;return i+=p(o,i)+1,0===o[i+1]&&(i+=1),new Blob([o.slice(i)],{type:s})}async function L(t,n,e,i,o){for(;;){const s=y(t,n),c=b(t,n+=4,e),f=r(t,n+=4,2),l=g(f[1],3),h=g(f[1],1);if(n+=2,!s){if("ID3"===u(r(t,n-=10,3)))return{repeat:!0,offset:n,tags:i};break}{const r=U(s);let u=n,f=c;l&&(f=b(t,u,e),u+=4),o&&u+f>t.byteLength&&(t=await a(o)),r&&!i[r]&&("picture"===r?i[r]=m(t,u,f):(i[r]=w(t,u,f,h),"duration"===r&&(i[r]=Math.floor(Number.parseInt(i[r],10)/1e3)))),n+=c}}if(i.duration)return{offset:n,tags:i};for(;0===new DataView(t,n,1).getUint8(0);)n+=1;return{offset:n,tags:i}}async function A(t,n,e,i=0,o={}){const s=i,c=d(t,i+=6)+10;i+=4,e&&s+c>t.byteLength&&(t=await a(e,s+c+t.byteLength));let f=!1;if(({repeat:f,offset:i,tags:o}=await L(t,i,n,o,e)),f)return A(t,n,e,i,o);if(o.duration)return o;({offset:i,tags:o}=await L(t,i,n,o,e));let l=0,h=!0;for(e&&i>t.byteLength&&(t=await a(e));i<t.byteLength;){const n=r(t,i,4);if(255!==n[0]||n[1]<112)return o.duration=C(l,o),o;if(h){o=v(n,o);const s=36,c=u(r(t,i+s,4));if("Xing"===c||"Info"===c)return T(t,i+s,o);e&&t.byteLength<e.size&&(t=await a(e)),h=!1}l+=1,i+=R(n[2],o)}return o.duration=C(l,o),o}function R(t,{bitrate:n,sampleRate:e}){const r=(2&t)>0?1:0;return Math.floor(144e3*n/e)+r}function v(t,n){const e=t[1]>>3&3,r=t[1]>>1&3,i=t[2]>>2&3,o=t[2]>>4&15;return n.sampleRate=s[e][i],n.samplesPerFrame=c[e][r],n.bitrate=h[e][r][o],n}function C(t,{samplesPerFrame:n,sampleRate:e}){return Math.floor(t*n/e)}function T(t,n,e){const i=o(r(t,n+8,4),{endian:"big"});return e.duration=C(i,e),e}function U(t){return{TIT2:"title",TPE1:"artist",TALB:"album",TLEN:"duration",APIC:"picture"}[t]}function B(t){const n=atob(t),e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}function I(t,n){return o(i(t,n,4),{endian:"big"})}function k(t,n){let e=4;const r=I(t,e);e+=4;const o=u(i(t,e,r));e+=r;const a=I(t,e);e+=4,e+=a,e+=16;const s=I(t,e);return e+=4,n.picture=new Blob([i(t,e,s)],{type:o}),n}function M(t,n){return o(i(t,n,4),{endian:"little"})}function D(t,n,e=0){const r=M(t,e);let o=M(t,e+=r+4);for(e+=4;o;){const r=M(t,e),a=u(i(t,e+=4,r),"utf-8"),[s,c]=a.split("=");"metadata_block_picture"===s.toLowerCase()?n=k(B(c),n):n[s.toLowerCase()]=c,e+=r,o-=1}return n}function E(t){return t.reduce(((t,n)=>(t<<8)+n),0)}function P(t,n){const e=E(t.slice(10,13))>>4,r=E(new Uint8Array([15&t[13],...t.slice(14,18)]));return e&&(n.duration=Math.floor(r/e)),n}async function W(t,n,e=4){let i={},u=!1;for(;!u;){const s=r(t,e,4),c=o(s,{endian:"big"}),f=s[0],l=127&f;if(u=!(128&~f),e+=4,n&&e+c>t.byteLength&&(t=await a(n,t.byteLength+e+c)),0===l){i=P(r(t,e,c),i)}else if(4===l){i=D(r(t,e,c),i)}else if(6===l){i=k(r(t,e,c),i)}e+=c}return i}function F(t,n){const e=new Uint8Array(t.length+n.length);return e.set(t),e.set(n,t.length),e}function N(t,n){const e=u(i(t,0,5));if("OpusH"===e||"vorb"===e)return function(t,n){return n.sampleRate=o(i(t,12,4),{endian:"little"}),n}(t,n);if("OpusT"===e)return D(t,n,8);if("vorb"===e)return D(t,n,7);throw new Error("Unknown type")}function O(t,n){return o(r(t,n,4),{endian:"big",byteCount:4})}function z(t,n){const e=new DataView(t,n,1).getUint8(0);let r=0,i=0;return n+=4,0===e?(r=O(t,n+=8),i=O(t,n+=4)):(r=O(t,n+=16),i=O(t,(n+=4)+4)),Math.floor(i/r)}function V(t,n,e,i){const o={"©ART":"artist","©nam":"title","©alb":"album","©cmt":"comment","©day":"year","©too":"encoding",covr:"picture"};for(;e;){const s=O(t,n),c=o[u(r(t,n+4,4),"iso-8859-1")],f=24;if(c&&s>f){const e=r(t,n+f,s-f);i[c]="picture"===c?new Blob([e],{type:(a=e,255===a[0]&&216===a[1]?"image/jpg":"PNG"===u(a.slice(0,4))?"image/png":"")}):u(e,"utf-8")}n+=s,e-=s}var a;return i}async function _(t,n=4){const e=o(r(t,n+=12,4),{endian:"little"});n+=4;const{sampleRate:i,dataRate:a}=function(t,n){n+=4;const e=r(t,n,4),i=o(e,{endian:"little"});n+=4;const u=r(t,n,4),a=o(u,{endian:"little"});return{sampleRate:i,dataRate:a}}(t,n);n=function(t,n){for(;n<t.byteLength;){if("data"===u(r(t,n,4)))return n;let e=o(r(t,n+=4,4),{endian:"little"});e%2==1&&(e+=1),n+=4+e}return n}(t,n+=e);const s=o(r(t,n+=4,4),{endian:"little"});return{sampleRate:i,duration:Math.floor(s/a)}}async function j(t,n){const e=r(t,0,8),i=u(e);if(i.startsWith("ID3")){if(e[3]<3)throw new Error("Unsupported ID3 tag version.");const i=function(t){const n=r(t,6,4);return 2097152*n[0]+16384*n[1]+128*n[2]+n[3]}(t)+10;n&&(t=await a(n,t.byteLength+i+1024));return"fLaC"===u(r(t,i,4))?W(t,n,i+4):A(t,e[3],n)}if(i.startsWith("fLaC"))return W(t,n);if(i.startsWith("OggS"))return n&&(t=await a(n)),function(t){let n={},e=0,i=2,u=new Uint8Array;for(;e<t.byteLength;){e+=5;const[a]=r(t,e,1);if(e+=1,4===a){const i=o(r(t,e,4),{endian:"little"});return n.duration=Math.floor(i/n.sampleRate),n}e+=20;const[s]=r(t,e,1);e+=1;const c=r(t,e,s);let f=0;e+=s;for(let t=0;t<s;t++)f+=c[t];if(i){const o=c[c.length-1];u=F(u,r(t,e,f)),f%255==0&&o||(i-=1,n=N(u,n),u=new Uint8Array)}e+=f}}(t);if(i.endsWith("ftyp"))return n&&(t=await a(n)),function(t){const n=["moov","mvhd","udta","meta","ilst"];let e={},i=0;for(;n.length&&i<t.byteLength;){const o=O(t,i),a=u(r(t,i+4,4));n[0]===a?(i+=8,n.shift(),"mvhd"===a?(e.duration=z(t,i),i+=o-8):"ilst"===a?e=V(t,i,o-8,e):"meta"===a&&(i+=4)):i+=o}return e}(t);if(i.startsWith("RIFF"))return _(t);throw new Error("Invalid or unsupported file.")}async function x(t){if(t instanceof ArrayBuffer)return j(t);const n=t;return j(await a(n,24576),n)}}}]);