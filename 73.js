"use strict";(globalThis.webpackChunkveery=globalThis.webpackChunkveery||[]).push([[73],{73:(t,n,e)=>{function r(t,n,e){return new Uint8Array(t,n,e)}function i(t,n,e){return t.slice(n,n+e)}function o(t,n){if("little"===n.endian)return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;if(7===n.shiftBase)return t[0]<<21|t[1]<<14|t[2]<<7|t[3];let e=t[1]<<16|t[2]<<8|t[3];return 4===n.byteCount&&(e=t[0]<<24|e),e}function u(t,n="utf-8"){return new TextDecoder(n).decode(t)}function a(t,n){return(n?t.slice(0,Math.min(n,t.size)):t).arrayBuffer()}e.d(n,{A:()=>j});const c=[[11025,12e3,8e3],null,[22050,24e3,16e3],[44100,48e3,32e3]],s=[[384,1152,576],null,[384,1152,576],[384,1152,1152]],l=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,0],f=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,0],h=[[null,f,f,l],null,[null,f,f,l],[null,[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,0],[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,0],[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,0]]];function g(t,n){return t&1<<n}function d(t,n){return o(r(t,n,4),{endian:"big",shiftBase:7})}function b(t,n,e){return 3===e?o(r(t,n,4),{endian:"big"}):d(t,n)}function y(t,n,e,i){const o=r(t,n,e),[a]=o;if(0===a){if(i>0){let t=-1;for(let n=2;n<o.length;n+=1)if(255===o[n-2]&&0===o[n-1]&&254===o[n]){t=n+1;break}if(t>0){return u(o.slice(t).filter((t=>Boolean(t))),"iso-8859-1")}}const t=u(o,"iso-8859-1");return 0===o[o.length-1]?t.slice(1,-1):t.slice(1)}if(1===a){const t=255===o[1]&&254===o[2]?"utf-16le":"utf-16be",n=o.length%2==0?o.slice(3,-1):o.slice(3);"utf-16be"===t&&(n[0]=0);const e=u(n,t);return 0===o[o.length-1]&&0===o[o.length-2]?e.slice(0,-1):e}if(2===a){return u(o.length%2==0?o.slice(1,-1):o.slice(1),"utf-16le")}if(3===a){const t=u(o,"utf-8");return 0===o[o.length-1]?t.slice(1,-1):t.slice(1)}return u(o,"iso-8859-1")}function p(t,n){const e=u(r(t,n,4));return/\w{4}/.test(e)?e:null}function w(t,n){let e=0;for(;t[n];)n+=1,e+=1;return e}function m(t,n,e){let i=1;const o=r(t,n,e),a=w(o,i),c=u(r(t,n+i,a));i+=a+2;const s=w(o,i)+1;return i+=s,0===o[i+s+1]&&(i+=1),new Blob([o.slice(i)],{type:c})}async function L(t,n,e,i=0,o={}){const c=i,s=d(t,i+=6)+10;for(i+=4,e&&c+s>t.byteLength&&(t=await a(e,c+s+t.byteLength));;){const c=p(t,i),s=b(t,i+=4,n),l=r(t,i+=4,2),f=g(l[1],3),h=g(l[1],1);if(i+=2,!c){if("ID3"===u(r(t,i-=10,3)))return L(t,n,e,i,o);break}{const r=C(c);let u=i,l=s;f&&(l=b(t,u,n),u+=4),e&&u+l>t.byteLength&&(t=await a(e)),r&&!o[r]&&("picture"===r?o[r]=m(t,u,l):(o[r]=y(t,u,l,h),"duration"===r&&(o[r]=Math.floor(Number.parseInt(o[r],10)/1e3))))}i+=s}if(o.duration)return o;for(;0===new DataView(t,i,1).getUint8(0);)i+=1;let l=0,f=!0;for(;i<t.byteLength;){const n=r(t,i,4);if(255!==n[0]||n[1]<112)return o.duration=T(l,o),o;if(f){o=R(n,o);const c=36,s=u(r(t,i+c,4));if("Xing"===s||"Info"===s)return v(t,i+c,o);e&&t.byteLength<e.size&&(t=await a(e)),f=!1}l+=1,i+=A(n[2],o)}return o.duration=T(l,o),o}function A(t,{bitrate:n,sampleRate:e}){const r=(2&t)>0?1:0;return Math.floor(144e3*n/e)+r}function R(t,n){const e=t[1]>>3&3,r=t[1]>>1&3,i=t[2]>>2&3,o=t[2]>>4&15;return n.sampleRate=c[e][i],n.samplesPerFrame=s[e][r],n.bitrate=h[e][r][o],n}function T(t,{samplesPerFrame:n,sampleRate:e}){return Math.floor(t*n/e)}function v(t,n,e){const i=o(r(t,n+8,4),{endian:"big"});return e.duration=T(i,e),e}function C(t){return{TIT2:"title",TPE1:"artist",TALB:"album",TLEN:"duration",APIC:"picture"}[t]}function U(t){const n=atob(t),e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}function B(t,n){return o(i(t,n,4),{endian:"big"})}function I(t,n){let e=4;const r=B(t,e);e+=4;const o=u(i(t,e,r));e+=r;const a=B(t,e);e+=4,e+=a,e+=16;const c=B(t,e);return e+=4,n.picture=new Blob([i(t,e,c)],{type:o}),n}function M(t,n){return o(i(t,n,4),{endian:"little"})}function k(t,n,e=0){const r=M(t,e);let o=M(t,e+=r+4);for(e+=4;o;){const r=M(t,e),a=u(i(t,e+=4,r),"utf-8"),[c,s]=a.split("=");"METADATA_BLOCK_PICTURE"===c?n=I(U(s),n):n[c.toLowerCase()]=s,e+=r,o-=1}return n}function D(t){return t.reduce(((t,n)=>(t<<8)+n),0)}function E(t,n){const e=D(t.slice(10,13))>>4,r=D(new Uint8Array([15&t[13],...t.slice(14,18)]));return e&&(n.duration=Math.floor(r/e)),n}async function P(t,n,e=4){let i={},u=!1;for(;!u;){const c=r(t,e,4),s=o(c,{endian:"big"}),l=c[0],f=127&l;if(u=!(128&~l),e+=4,n&&e+s>t.byteLength&&(t=await a(n,t.byteLength+e+s)),0===f){i=E(r(t,e,s),i)}else if(4===f){i=k(r(t,e,s),i)}else if(6===f){i=I(r(t,e,s),i)}e+=s}return i}function W(t,n){const e=new Uint8Array(t.length+n.length);return e.set(t),e.set(n,t.length),e}function F(t,n){const e=u(i(t,0,5));if("OpusH"===e||"vorb"===e)return function(t,n){return n.sampleRate=o(i(t,12,4),{endian:"little"}),n}(t,n);if("OpusT"===e)return k(t,n,8);if("vorb"===e)return k(t,n,7);throw new Error("Unknown type")}function O(t,n){return o(r(t,n,4),{endian:"big",byteCount:4})}function N(t,n){const e=new DataView(t,n,1).getUint8(0);let r=0,i=0;return n+=4,0===e?(r=O(t,n+=8),i=O(t,n+=4)):(r=O(t,n+=16),i=O(t,(n+=4)+4)),Math.floor(i/r)}function z(t,n,e,i){const o={"©ART":"artist","©nam":"title","©alb":"album","©cmt":"comment","©day":"year","©too":"encoding",covr:"picture"};for(;e;){const c=O(t,n),s=o[u(r(t,n+4,4),"iso-8859-1")],l=24;if(s&&c>l){const e=r(t,n+l,c-l);i[s]="picture"===s?new Blob([e],{type:(a=e,255===a[0]&&216===a[1]?"image/jpg":"PNG"===u(a.slice(0,4))?"image/png":"")}):u(e,"utf-8")}n+=c,e-=c}var a;return i}async function V(t,n=4){const e=o(r(t,n+=12,4),{endian:"little"});n+=4;const{sampleRate:i,dataRate:a}=function(t,n){n+=4;const e=r(t,n,4),i=o(e,{endian:"little"});n+=4;const u=r(t,n,4),a=o(u,{endian:"little"});return{sampleRate:i,dataRate:a}}(t,n);n=function(t,n){for(;n<t.byteLength;){if("data"===u(r(t,n,4)))return n;let e=o(r(t,n+=4,4),{endian:"little"});e%2==1&&(e+=1),n+=4+e}return n}(t,n+=e);const c=o(r(t,n+=4,4),{endian:"little"});return{sampleRate:i,duration:Math.floor(c/a)}}async function _(t,n){const e=r(t,0,8),i=u(e);if(i.startsWith("ID3")){if(e[3]<3)throw new Error("Unsupported ID3 tag version.");const i=function(t){const n=r(t,6,4);return 2097152*n[0]+16384*n[1]+128*n[2]+n[3]}(t)+10;n&&(t=await a(n,t.byteLength+i+1024));return"fLaC"===u(r(t,i,4))?P(t,n,i+4):L(t,e[3],n)}if(i.startsWith("fLaC"))return P(t,n);if(i.startsWith("OggS"))return n&&(t=await a(n)),function(t){let n={},e=0,i=2,u=new Uint8Array;for(;e<t.byteLength;){e+=5;const[a]=r(t,e,1);if(e+=1,4===a){const i=o(r(t,e,4),{endian:"little"});return n.duration=Math.floor(i/n.sampleRate),n}e+=20;const[c]=r(t,e,1);e+=1;const s=r(t,e,c);let l=0;e+=c;for(let t=0;t<c;t++)l+=s[t];if(i){const o=s[s.length-1];u=W(u,r(t,e,l)),l%255==0&&o||(i-=1,n=F(u,n),u=new Uint8Array)}e+=l}}(t);if(i.endsWith("ftyp"))return n&&(t=await a(n)),function(t){const n=["moov","mvhd","udta","meta","ilst"];let e={},i=0;for(;n.length&&i<t.byteLength;){const o=O(t,i),a=u(r(t,i+4,4));n[0]===a?(i+=8,n.shift(),"mvhd"===a?(e.duration=N(t,i),i+=o-8):"ilst"===a?e=z(t,i,o-8,e):"meta"===a&&(i+=4)):i+=o}return e}(t);if(i.startsWith("RIFF"))return V(t);throw new Error("Invalid or unsupported file.")}async function j(t){if(t instanceof ArrayBuffer)return _(t);const n=t;return _(await a(n,24576),n)}}}]);