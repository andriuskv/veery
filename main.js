(()=>{"use strict";var e,t,n,i,r,o={461:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(893);function r({id:e,className:t,title:n}){return(0,i.jsxs)("svg",{viewBox:"0 0 24 24",className:t,children:[n&&(0,i.jsx)("title",{children:n}),(0,i.jsx)("use",{href:`#${e}`})]})}},307:(e,t,n)=>{n.d(t,{J:()=>s,l:()=>l});var i=n(294),r=n(353),o=n(893);const a=(0,i.createContext)();function s({children:e}){const[t,n]=(0,i.useState)([]),s=(0,i.useMemo)((()=>({notifications:t,showNotification:u,dismissNotification:m})),[t]),l=(0,i.useRef)(0),c=(0,i.useRef)(null);function d({detail:e}){u(e)}function u(e){return e.id=(0,r.zO)(),c.current(e),e.id}function f(e){const i=t.length+1,r=i-6<0?0:i-6;t.push(e),n([...t.slice(r,i)])}function m(e){const i=t.findIndex((t=>t.id===e));p(i),setTimeout((()=>{t.splice(i,1),n([...t])}),400)}function p(e){t[e].hidding=!0,n([...t])}return(0,i.useEffect)((()=>{c.current=f})),(0,i.useEffect)((()=>(clearTimeout(l.current),window.addEventListener("notification",d),t.length&&(l.current=setTimeout((()=>{p(0),setTimeout((()=>{t.shift(),n([...t])}),400)}),5e3)),()=>{window.removeEventListener("notification",d)})),[t]),(0,o.jsx)(a.Provider,{value:s,children:e})}function l(){return(0,i.useContext)(a)}},500:(e,t,n)=>{n.d(t,{I:()=>v,n:()=>h});var i=n(294),r=n(974),o=n(353),a=n(615),s=n(139),l=n(255),c=n(406),d=n(768),u=n(322),f=n(676),m=n(893);const p=(0,i.createContext)();function v({children:e}){const t=(0,r.TH)(),{playlists:n}=(0,a.K)(),{getNextQueueItem:v,getQueueItemAtIndex:h,resetQueue:y}=(0,s.b)(),[b,g]=(0,i.useState)(""),[w,k]=(0,i.useState)(null),[x,T]=(0,i.useState)(!0),[j,I]=(0,i.useState)(!1),E=(0,i.useRef)(!1);function S({detail:{loading:e,paused:t}}){"boolean"==typeof t&&A(t),"boolean"==typeof e&&(I(e),e?(0,f.Bv)():(0,f.Ne)())}function L({detail:{track:e,playlistId:t}}){k(e),t!==b&&P(t),I(!0),A(!1)}function N(){const e=(0,l.$8)("repeat");if("repeat-off"===e&&d.TY())d.Gj();else if("repeat-one"===e)d.d$();else{const e=v();d.vR(e)}}function $(){T(!0),k(null),g("")}function P(e){g(e),d.Ml(e)}function A(e){T(e),d.Q7(e),(0,f.IB)(e)}function O(){d.Xh(),A(!x)}function C(){b&&(d.tW(b)?d.ax({scrollToTrack:!0}):d.Gj())}function M(){if(b)if(d.tW(b)){const e=v();d.vR(e,{scrollToTrack:!0})}else d.Gj()}function H({action:e}){let{currentTime:t}=c.OE();"seekforward"===e?t+=5:"seekbackward"===e&&(t-=5),d.wc(t),(0,o.hb)("current-time-update",t)}function R({seekTime:e}){const t=Math.round(e);d.wc(t),(0,o.hb)("current-time-update",t)}return(0,i.useEffect)((()=>(window.addEventListener("player-state",S),window.addEventListener("reset-player",$),()=>{window.removeEventListener("player-state",S),window.removeEventListener("reset-player",$)})),[]),(0,i.useEffect)((()=>{if(n)if(x){const e=t.pathname.split("/playlist/")[1];if(e){const t=u.hT(e);document.title=t?`${t.title} | Veery`:"404 | Veery"}else"/"===t.pathname?document.title="Home | Veery":t.pathname.startsWith("/search")?document.title="Search | Veery":document.title="404 | Veery"}else{const{title:e,artist:t}=w;document.title=`${t&&e?`${t} - ${e}`:e} | Veery`}}),[n,x,w,t]),(0,i.useEffect)((()=>(window.addEventListener("track-start",L),window.addEventListener("track-end",N),()=>{window.removeEventListener("track-start",L),window.removeEventListener("track-end",N)})),[b]),(0,i.useEffect)((()=>{if(w)return navigator.mediaSession.setActionHandler("play",O),navigator.mediaSession.setActionHandler("pause",O),navigator.mediaSession.setActionHandler("previoustrack",C),navigator.mediaSession.setActionHandler("nexttrack",M),navigator.mediaSession.setActionHandler("seekforward",H),navigator.mediaSession.setActionHandler("seekbackward",H),navigator.mediaSession.setActionHandler("seekto",R),()=>{navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null),navigator.mediaSession.setActionHandler("seekforward",null),navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekto",null)}}),[x,w]),(0,i.useEffect)((()=>{n&&!E.current&&function(){E.current=!0;const e=c.OE();if(!e)return;const{playlistId:t,trackId:n,currentTime:i}=e,r=u.hT(t);if(r){const e=r.tracks.find((e=>n===e.id));if(e)return k(e),P(t),d.X5(t,e.index),void d.xW(e,t,{currentTime:i,willPlay:!1})}c.T1()}()}),[n]),(0,m.jsx)(p.Provider,{value:{paused:x,activePlaylistId:b,activeTrack:w,trackLoading:j,togglePlay:O,playPrevious:C,playNext:M,playAtIndex:function(e,t){d.CF(e,t),y()},playPlaylist:function(e,t){d.tW(e)&&(d.MP(e,t),y())},playQueueTrack:function(e,t){const n=h(e);d.Kp(n,t)}},children:e})}function h(){return(0,i.useContext)(p)}},615:(e,t,n)=>{n.d(t,{r:()=>m,K:()=>p});var i=n(294),r=n(29),o=n(353),a=n(255),s=n(322),l=n(768),c=n(585),d=n(307),u=n(893);const f=(0,i.createContext)();function m({children:e}){const{showNotification:t}=(0,d.l)(),[m,p]=(0,i.useState)(null),v=(0,i.useMemo)((()=>({playlists:m,createPlaylist:k,updatePlaylist:x,removePlaylist:T,addTracks:j,uploadFiles:w})),[m]);async function h(e){e.preventDefault();const{readItems:t}=await n.e(810).then(n.bind(n,810)),i=await t(e.dataTransfer.items);i.length&&w(i)}function y(e){n.e(810).then(n.bind(n,810)),e.preventDefault()}function b({detail:{track:e,done:t}}){const n=m["local-files"],i=n.tracks.findIndex((({name:t})=>e.name===t));i>=0&&(n.tracks[i]=e,x(n.id,{tracks:n.tracks},t))}function g({detail:{id:e,tracks:t,done:n}}){j(e,t,n)}async function w(e){const{collectUniqueTracks:i,updateTracksWithMetadata:r}=await n.e(810).then(n.bind(n,810)),a="local-files",s=m[a],l=i(e,s?s.tracks:[]);l.length?((0,o.hb)("update-indicator-status",{id:a,visible:!0}),s?j(a,l,!1):k({id:a,title:"Local Files",viewMode:"compact",tracks:l}),await r(l)):t({value:"No unique files found."}),(0,o.hb)("update-indicator-status",{id:a,visible:!1})}function k(e){p({...m,[e.id]:s.cg(e)})}function x(e,t,n){p({...m,[e]:s.CE(e,t,n)})}function T(e){const t=s.vg(e);p({...t})}async function j(e,t,n=!0){const i=l.cI();x(e,{tracks:await s._j(e,t,!1)},n),e===i&&l.Rz()}return(0,i.useEffect)((()=>{!async function(){const e=await async function(){let e=null;try{e=await(0,r.X3)("veery",1,{upgrade(e){e.createObjectStore("artworks",{keyPath:"id"}),e.createObjectStore("playlists",{keyPath:"id"})}})}catch(t){e=await new Promise((e=>{indexedDB.deleteDatabase("veery").onsuccess=function(){e((0,r.X3)("veery",1,{upgrade(e){e.createObjectStore("artworks",{keyPath:"id"}),e.createObjectStore("playlists",{keyPath:"id"})}}))}}))}return e}();localStorage.getItem("reseted")||(localStorage.setItem("reseted",1),localStorage.removeItem("veery-settings"),(0,a.Sl)(),await Promise.all([e.clear("artworks"),e.clear("playlists")]));await Promise.all([c.T4(e),s.Sf(e)]);const t=s.$F();p(t);for(const e of Object.values(t))if(e.sync){const{initGoogleAPI:t,fetchPlaylistItems:i}=await n.e(7).then(n.bind(n,7)),r=await t();await i(e.id),(0,o.hb)("youtube-user-update",r)}}()}),[]),(0,i.useEffect)((()=>(window.addEventListener("drop",h),window.addEventListener("dragover",y),window.addEventListener("track",b),window.addEventListener("youtube-tracks",g),()=>{window.removeEventListener("drop",h),window.addEventListener("dragover",y),window.removeEventListener("track",b),window.removeEventListener("youtube-tracks",g)})),[m]),(0,u.jsx)(f.Provider,{value:v,children:e})}function p(){return(0,i.useContext)(f)}},139:(e,t,n)=>{n.d(t,{L:()=>s,b:()=>l});var i=n(294),r=n(179),o=n(893);const a=(0,i.createContext)();function s({children:e}){const[t,n]=(0,i.useState)([]),s=(0,i.useMemo)((()=>({queue:t,enqueueTracks:l,resetQueue:c,dequeueTrack:d,getNextQueueItem:u,getQueueItemAtIndex:f})),[t]);function l(e){n([...r.VR(e)])}function c(){r.Yt(),n([])}function d(e){const t=r.$b(e);n([...t])}function u(){const e=r.$m();if(e)return n([...e.queue]),e;t.length&&n([])}function f(e){const{queue:t,track:i}=r.xo(e);return n([...t]),i}return(0,o.jsx)(a.Provider,{value:s,children:e})}function l(){return(0,i.useContext)(a)}},682:(e,t,n)=>{var i=n(294),r=n(935),o=n(711),a=n(307),s=n(615),l=n(139),c=n(500),d=n(974),u=n(461),f=n(893);const m=function({nowPlayingVisible:e}){const t=(0,d.TH)(),{playlists:n}=(0,s.K)(),{activePlaylistId:r,paused:a}=(0,c.n)(),[l,m]=(0,i.useState)({}),[p,v]=(0,i.useState)(!1),[h,y]=(0,i.useState)(!1);function b({detail:{id:e,visible:t}}){t?m({...l,[e]:t}):(delete l[e],m({...l}))}function g(){v(!0)}function w(){v(!1)}function k(e){const t=r===e&&!a,n=l[e];return t||n?(0,f.jsxs)("div",{className:"sidebar-playlist-status-container",children:[t&&(0,f.jsx)("span",{className:"sidebar-active-playlist-indicator"}),n&&(0,f.jsx)(u.Z,{id:"spinner"})]}):null}function x({isActive:e}){let t="btn icon-text-btn sidebar-link";return e&&(t+=" active"),t}return(0,i.useEffect)((()=>(window.addEventListener("update-indicator-status",b),()=>{window.removeEventListener("update-indicator-status",b)})),[]),(0,i.useEffect)((()=>{p&&w(),y(!t.pathname.startsWith("/playlist/"))}),[t]),(0,f.jsxs)(f.Fragment,{children:[function(){const e=(0,f.jsx)("button",{onClick:g,className:"btn icon-btn sidebar-show-btn",children:(0,f.jsx)(u.Z,{id:"menu"})});return h?(0,f.jsx)("div",{className:"sidebar-toolbar",children:e}):e}(),(0,f.jsx)("div",{className:`sidebar-container${p?"":" hidden"}${e?" now-playing-visible":""}`,onClick:function(e){e.target===e.currentTarget&&w()},children:(0,f.jsxs)("aside",{className:"sidebar",children:[(0,f.jsx)("header",{className:"sidebar-header",children:(0,f.jsx)("h1",{className:"sidebar-header-title",children:"Veery"})}),(0,f.jsxs)("nav",{className:"sidebar-links",children:[(0,f.jsxs)("ul",{className:"sidebar-general-links",children:[(0,f.jsx)("li",{children:(0,f.jsxs)(o.OL,{to:"/",className:x,children:[(0,f.jsx)(u.Z,{id:"home"}),(0,f.jsx)("span",{children:"Home"})]})}),(0,f.jsx)("li",{children:(0,f.jsxs)(o.OL,{to:"/search",className:x,children:[(0,f.jsx)(u.Z,{id:"search"}),(0,f.jsx)("span",{children:"Search"})]})})]}),n?(0,f.jsx)("ul",{className:"sidebar-playlist-links",children:Object.values(n).map((e=>(0,f.jsx)("li",{children:(0,f.jsxs)(o.OL,{to:`/playlist/${e.id}`,className:x,children:[(0,f.jsx)("span",{className:"sidebar-playlist-title",children:e.title}),k(e.id)]})},e.id)))}):null]})]})})]})};var p=n(255),v=n(768),h=n(676),y=n(585);const b=function({visible:e,toggleNowPlaying:t,youtubePlayerMaximized:n}){const i=(0,d.s0)(),{activePlaylistId:r,activeTrack:o}=(0,c.n)();let a="./assets/images/album-art-placeholder.png",s="";function l(){return(0,f.jsx)("button",{className:"btn icon-btn artwork-btn",onClick:t,title:e?"Hide":"Expand",children:(0,f.jsx)(u.Z,{id:"menu-down",className:"artwork-btn-icon"+(e?"":" rotated")})},"a")}if(e&&!n)return(0,f.jsx)("div",{className:"player-bar-now-playing",children:(0,f.jsx)("div",{className:"artwork-container player-bar-artwork-container",children:l()})});if(o){const{isPlaceholder:e,small:t}=(0,y.eA)(o.artworkId);a=t.url,s+=" active",e&&(s+=" placeholder")}return(0,f.jsxs)("div",{className:"player-bar-now-playing"+(n?" youtube-player-maximized":""),children:[(0,f.jsxs)("div",{className:`artwork-container player-bar-artwork-container${s}`,children:[(0,f.jsx)("img",{src:a,className:"artwork",alt:""}),o?l():null]}),o?(0,f.jsxs)("div",{className:"track-info",children:[(0,f.jsx)("div",{className:"track-info-item track-title multiline",onClick:function(){r===(0,h.HR)()?(0,h.O9)(r):i(`/playlist/${r}`),e&&t()},children:o.title}),o.artist?(0,f.jsx)("div",{className:"track-info-item",children:o.artist}):null]}):null]})};var g=n(353),w=n(406),k=n(179);const x=function({inert:e,element:t,className:n,progress:i,min:r,now:o,max:a,nowText:s,label:l,labelText:c,pointerDownHandler:d,keyDownHandler:u}){return e?(0,f.jsx)("div",{className:"slider-bar-container",children:(0,f.jsx)("div",{className:"slider-bar",children:(0,f.jsx)("div",{className:"slider-bar-inner"})})}):(0,f.jsxs)("div",{className:"slider-bar-container"+(n?` ${n}`:""),children:[(0,f.jsx)("div",{className:"slider-bar",ref:t,onPointerDown:d,onKeyDown:u,role:"slider",tabIndex:"0","aria-label":c,"aria-valuemin":r,"aria-valuenow":o,"aria-valuemax":a,"aria-valuetext":s,children:(0,f.jsxs)("div",{className:"slider-bar-inner",style:{"--progress":i},children:[(0,f.jsx)("div",{className:"slider-bar-elapsed"}),(0,f.jsx)("div",{className:"slider-bar-thumb"})]})}),l?(0,f.jsx)("div",{className:"slider-label",style:{"--progress":l.progress},children:l.text}):null]})};const T=function({showIndicator:e}){const{activeTrack:t}=(0,c.n)(),[n,r]=(0,i.useState)(!1),[{formattedCurrentTime:o,currentTime:a,progress:s},l]=(0,i.useState)((()=>({currentTime:0,formattedCurrentTime:"0:00",progress:0}))),[d,u]=(0,i.useState)((()=>({text:"0:00",progress:0}))),m=(0,i.useRef)(!1),p=(0,i.useRef)(null),h=(0,i.useRef)(!0);function y(e){const{target:t,key:n}=e;t instanceof HTMLInputElement&&"text"===t.type||!e.shiftKey||"ArrowRight"!==n&&"ArrowLeft"!==n||"slider"===t.getAttribute("role")||b(n)}function b(n){const i=t.durationInSeconds;let r=a;"ArrowRight"===n||"ArrowUp"===n?(r+=5,r>i&&(r=i),e({iconId:"fast-forward"})):"ArrowLeft"!==n&&"ArrowDown"!==n||(r-=5,r<0&&(r=0),e({iconId:"rewind"})),l({currentTime:r,formattedCurrentTime:(0,g.mr)(r),progress:r/t.durationInSeconds*100}),(0,v.wc)(r)}function T({detail:e}){l({currentTime:e,formattedCurrentTime:(0,g.mr)(e),progress:e/t.durationInSeconds*100}),navigator.mediaSession.setPositionState({duration:t.durationInSeconds,position:e}),"native"===t.player||(0,k.cV)()||w.SN({currentTime:e})}function j({pageX:e}){m.current||(m.current=!0,requestAnimationFrame((()=>{const{left:n,width:i}=p.current.getBoundingClientRect();let r=(e-n)/i;r<0?r=0:r>1&&(r=1);const a=Math.round(t.durationInSeconds*r),s=100*r;l({currentTime:a,formattedCurrentTime:o,progress:s}),u({text:(0,g.mr)(a),progress:s}),m.current=!1})))}function I({currentTarget:e,pageX:n}){m.current||(m.current=!0,requestAnimationFrame((()=>{const{left:i,width:r}=e.getBoundingClientRect();let o=(n-i)/r;o<0?o=0:o>1&&(o=1);const a=Math.round(t.durationInSeconds*o);u({text:(0,g.mr)(a),progress:100*o}),m.current=!1})))}function E(){l({currentTime:a,formattedCurrentTime:(0,g.mr)(a),progress:s}),r(!1),(0,v.wc)(a)}return(0,i.useEffect)((()=>{if(t){if(h.current){h.current=!1;const e=w.OE();e&&l({currentTime:e.currentTime,formattedCurrentTime:(0,g.mr)(e.currentTime),progress:e.currentTime/t.durationInSeconds*100})}return()=>{l({currentTime:0,formattedCurrentTime:"0:00",progress:0})}}}),[t]),(0,i.useEffect)((()=>(t&&window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)})),[a,t]),(0,i.useEffect)((()=>(t&&(window.addEventListener("current-time-update",T),n?(window.addEventListener("pointermove",j),p.current.removeEventListener("pointermove",I),window.removeEventListener("current-time-update",T)):p.current.addEventListener("pointermove",I)),()=>{p.current&&p.current.removeEventListener("pointermove",I),window.removeEventListener("pointermove",j),window.removeEventListener("current-time-update",T)})),[n,t]),(0,i.useEffect)((()=>(n&&window.addEventListener("pointerup",E),()=>{window.removeEventListener("pointerup",E)})),[a,n]),t?(0,f.jsxs)("div",{className:"seek-slider-container",children:[(0,f.jsx)("div",{className:"seek-slider-time",children:o}),(0,f.jsx)(x,{element:p,progress:s,label:d,pointerDownHandler:function(e){t&&0===e.button&&(r(!0),j(e))},keyDownHandler:function({key:e}){e.startsWith("Arrow")&&b(e)},min:"0",now:a,max:t.durationInSeconds,nowText:`${o} / ${t.duration}`,labelText:"Seek slider"}),(0,f.jsx)("div",{className:"seek-slider-time",children:t.duration})]}):(0,f.jsxs)("div",{className:"seek-slider-container",children:[(0,f.jsx)("div",{className:"seek-slider-time",children:"0:00"}),(0,f.jsx)(x,{inert:!0}),(0,f.jsx)("div",{className:"seek-slider-time",children:"0:00"})]})};const j=function({visible:e,showIndicator:t}){const[n,r]=(0,i.useState)((()=>(0,p.$8)("mute"))),[o,a]=(0,i.useState)((()=>(0,p.$8)("volume"))),[s,l]=(0,i.useState)(!1),c=(0,i.useRef)(!1),d=(0,i.useRef)(null);function m(e){const t=e.ctrlKey||e.shiftKey||e.altKey||e.metaKey,{target:i,key:r}=e;i instanceof HTMLInputElement&&"text"===i.type||(!e.shiftKey||"ArrowUp"!==r&&"ArrowDown"!==r||"slider"===i.getAttribute("role")?t||"m"!==r||y(!n,!0):b(r))}function h(e){(0,p.Lt)("volume",e),a(e),v.jA(e)}function y(e,n=!1){let i=0;r(e),(0,p.Lt)("mute",e),e?(n&&t({iconId:"volume-off",text:"0%"}),(0,p.Lt)("volume-before-mute",(0,p.$8)("volume"))):(i=(0,p.$8)("volume-before-mute"),n&&t({iconId:"volume",text:`${Math.round(100*i)}%`}),(0,p.Wf)("volume-before-mute")),h(i)}function b(e){let n=o;if(n<1&&"ArrowRight"===e||"ArrowUp"===e)n||(r(!1),(0,p.Lt)("mute",!1),(0,p.Wf)("volume-before-mute")),n+=.05,n>1&&(n=1);else if((n||"ArrowDown"===e)&&(n-=.05,parseFloat(n.toFixed(2))<=0))return void y(!0,!0);h(n),t({iconId:"volume",text:`${Math.round(100*n)}%`})}function g({pageX:e}){c.current||(c.current=!0,requestAnimationFrame((()=>{const{left:t,width:i}=d.current.getBoundingClientRect();let r=(e-t)/i;r<=0?(r=0,n||y(!0)):n?y(!1):(r>1&&(r=1),h(r)),c.current=!1})))}function w(){l(!1)}return(0,i.useEffect)((()=>(window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)})),[n,o]),(0,i.useEffect)((()=>(s&&(window.addEventListener("pointermove",g),window.addEventListener("pointerup",w)),()=>{window.removeEventListener("pointermove",g),window.removeEventListener("pointerup",w)})),[n,s]),(0,f.jsxs)("div",{className:"player-bar-volume-controls"+(e?" visible":""),children:[(0,f.jsx)("button",{className:"btn icon-btn player-bar-tertiary-btn"+(n?" active":""),onClick:function(){y(!n)},title:n?"Unmute":"Mute",children:(0,f.jsx)(u.Z,{id:n?"volume-off":"volume",className:"player-bar-tertiary-btn-icon"})}),(0,f.jsx)(x,{element:d,className:"player-bar-volume-bar-container",progress:100*o,pointerDownHandler:function(e){0===e.button&&(l(!0),g(e))},keyDownHandler:function({key:e}){e.startsWith("Arrow")&&b(e)},min:"0",now:o,max:"1",nowText:`${Math.round(100*o)}%`,labelText:"Volume slider"})]})};const I=function({nowPlayingVisible:e,queueVisible:t,youtubePlayer:n,toggleNowPlaying:r,toggleQueue:o,toggleYoutubePlayer:a,showIndicator:s}){const{paused:l,activePlaylistId:d,activeTrack:m,trackLoading:y,togglePlay:g,playPrevious:w,playNext:k,playPlaylist:x}=(0,c.n)(),[I,E]=(0,i.useState)((()=>(0,p.$8)("shuffle"))),[S,L]=(0,i.useState)((()=>O((0,p.$8)("repeat")))),[N,$]=(0,i.useState)(!1);function P(e){const{target:t,key:n}=e;if(t instanceof HTMLInputElement&&"text"===t.type)return;e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||("p"===n?A(!0):"["===n?d&&(k(),s({iconId:"next"})):"o"===n&&d&&(w(),s({iconId:"previous"})))}function A(e=!1){if(d)return g(),void(e&&s({iconId:l?"play":"pause"}));const t=(0,h.HR)();x(t,{scrollToTrack:!0})}function O(e){return{"repeat-off":{title:"Repeat",iconId:"repeat"},"repeat-all":{title:"Repeat one",iconId:"repeat",active:!0},"repeat-one":{title:"No repeat",iconId:"repeat-one",active:!0}}[e]}return(0,i.useEffect)((()=>(window.addEventListener("keydown",P),()=>{window.removeEventListener("keydown",P)})),[l,d]),(0,f.jsxs)("div",{className:`player-bar${e?" transparent":""}${"maximized"===n.mode?" youtube-player-maximized":""}${t?" queue-visible":""}`,children:[(0,f.jsx)(b,{visible:e,toggleNowPlaying:r,youtubePlayerMaximized:"maximized"===n.mode}),(0,f.jsx)(T,{showIndicator:s}),(0,f.jsxs)("div",{className:"player-bar-middle",children:[(0,f.jsx)("button",{className:"btn icon-btn player-bar-tertiary-btn player-bar-shuffle-btn"+(I?" active":""),onClick:function(){E(!I),v.Rz(),(0,p.Lt)("shuffle",!I)},title:I?"No shuffle":"Shuffle",children:(0,f.jsx)(u.Z,{id:"shuffle",className:"player-bar-tertiary-btn-icon"})}),(0,f.jsx)("button",{className:"btn icon-btn player-bar-secondary-btn",onClick:w,title:"Previous",children:(0,f.jsx)(u.Z,{id:"previous",className:"player-bar-secondary-btn-icon"})}),(0,f.jsxs)("button",{className:"btn icon-btn player-bar-play-pause-btn",onClick:()=>A(),title:l?"Play":"Pause",children:[(0,f.jsx)(u.Z,{id:l?"play-circle":"pause-circle",className:"player-bar-play-pause-btn-icon"}),y&&(0,f.jsx)(u.Z,{id:"spinner",className:"play-pause-btn-spinner"})]}),(0,f.jsx)("button",{className:"btn icon-btn player-bar-secondary-btn",onClick:k,title:"Next",children:(0,f.jsx)(u.Z,{id:"next",className:"player-bar-secondary-btn-icon"})}),(0,f.jsx)("button",{className:"btn icon-btn player-bar-tertiary-btn player-bar-repeat-btn"+(S.active?" active":""),onClick:function(){const e={"repeat-off":"repeat-all","repeat-all":"repeat-one","repeat-one":"repeat-off"}[(0,p.$8)("repeat")];L(O(e)),(0,p.Lt)("repeat",e)},title:S.title,children:(0,f.jsx)(u.Z,{id:S.iconId,className:"player-bar-tertiary-btn-icon"})})]}),(0,f.jsxs)("div",{className:"player-bar-right-controls"+(N?" visible":""),children:[e&&"youtube"===m?.player?(0,f.jsx)("button",{className:"btn icon-btn player-bar-tertiary-btn"+("off"!==n.mode?" active":""),onClick:a,title:n.title,children:(0,f.jsx)(u.Z,{id:n.iconId,className:"player-bar-tertiary-btn-icon"})}):null,m?(0,f.jsx)("button",{className:"btn icon-btn player-bar-tertiary-btn"+(t?" active":""),onClick:o,title:"Queue",children:(0,f.jsx)(u.Z,{id:"queue",className:"player-bar-tertiary-btn-icon"})}):null,(0,f.jsx)(j,{visible:N,showIndicator:s})]}),(0,f.jsx)("button",{className:"btn icon-btn player-bar-tertiary-btn player-bar-volume-toggle-btn"+(N?" active":""),onClick:function(){$(!N)},title:"Volume",children:(0,f.jsx)(u.Z,{id:"volume",className:"player-bar-tertiary-btn-icon"})})]})},E=(0,i.lazy)((()=>n.e(346).then(n.bind(n,346)))),S=(0,i.lazy)((()=>n.e(184).then(n.bind(n,184)))),L=(0,i.lazy)((()=>n.e(455).then(n.bind(n,455)))),N=(0,i.lazy)((()=>n.e(934).then(n.bind(n,934)))),$=(0,i.lazy)((()=>n.e(353).then(n.bind(n,373)))),P=(0,i.lazy)((()=>n.e(123).then(n.bind(n,123)))),A=(0,i.lazy)((()=>n.e(974).then(n.bind(n,101)))),O=(0,i.lazy)((()=>n.e(107).then(n.bind(n,107))));function C(){const{notifications:e}=(0,a.l)(),{activeTrack:t}=(0,c.n)(),[n,r]=(0,i.useState)(!1),[o,s]=(0,i.useState)(!1),[l,u]=(0,i.useState)((()=>g(localStorage.getItem("youtube-player")||"off"))),[p,v]=(0,i.useState)(null),h=(0,i.useRef)(0);function y(){s(!o)}function b(e){e&&v(null),requestAnimationFrame((()=>{v(e),clearTimeout(h.current),h.current=setTimeout((()=>{v(null)}),1e3)}))}function g(e){return{off:{mode:"off",title:"Show YouTube player",iconId:"mini"},mini:{mode:"mini",title:"Maximize YouTube player",iconId:"maximized",active:!0},maximized:{mode:"maximized",title:"Hide YouTube player",iconId:"off",active:!0}}[e]}return(0,i.useLayoutEffect)((()=>{t?"native"===t.player&&"off"!==l.mode?u({stateBefore:l}):"youtube"===t.player&&l.stateBefore&&u({...l.stateBefore}):(n&&r(!1),o&&s(!1))}),[t]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m,{nowPlayingVisible:n}),(0,f.jsx)("div",{className:"content"+(n?" hidden":""),children:(0,f.jsx)(i.Suspense,{fallback:null,children:(0,f.jsxs)(d.Z5,{children:[(0,f.jsx)(d.AW,{path:"/",element:(0,f.jsx)(E,{})}),(0,f.jsx)(d.AW,{path:"/search",element:(0,f.jsx)(S,{})}),(0,f.jsx)(d.AW,{path:"/playlist/:id",element:(0,f.jsx)(L,{})}),(0,f.jsx)(d.AW,{path:"*",element:(0,f.jsx)(O,{})})]})})}),(0,f.jsx)(I,{nowPlayingVisible:n,queueVisible:o,youtubePlayer:l,toggleNowPlaying:function(){r(!n)},toggleQueue:y,toggleYoutubePlayer:function(){const e={off:"mini",mini:"maximized",maximized:"off"}[l.mode];u(g(e)),localStorage.setItem("youtube-player",e)},showIndicator:b}),n&&t&&"maximized"!==l.mode&&(0,f.jsx)(i.Suspense,{fallback:null,children:(0,f.jsx)(N,{queueVisible:o,youtubePlayerVisible:"mini"===l.mode,showIndicator:b})}),o&&t&&(0,f.jsx)(i.Suspense,{fallback:null,children:(0,f.jsx)($,{toggleQueue:y,nowPlayingVisible:n,youtubePlayerMaximized:"maximized"===l.mode})}),e.length>0&&(0,f.jsx)(i.Suspense,{fallback:null,children:(0,f.jsx)(P,{notifications:e})}),function(){let e="";return n&&("mini"===l.mode?e=" visible":"maximized"===l.mode&&(e=" visible maximized")),(0,f.jsx)("div",{id:"js-youtube-player-container",className:`youtube-player-container${e}${o?" shift":""}`})}(),p&&(0,f.jsx)(i.Suspense,{fallback:null,children:(0,f.jsx)(A,{indicator:p,nowPlayingVisible:n,shift:o&&"maximized"!==l.mode})})]})}function M(){return(0,f.jsx)(o.UT,{children:(0,f.jsx)(a.J,{children:(0,f.jsx)(s.r,{children:(0,f.jsx)(l.L,{children:(0,f.jsx)(c.I,{children:(0,f.jsx)(C,{})})})})})})}(0,r.render)((0,f.jsx)(i.StrictMode,{children:(0,f.jsx)(M,{})}),document.getElementById("root")),navigator.serviceWorker.register("./sw.js").catch(console.log)},585:(e,t,n)=>{n.d(t,{T4:()=>l,Qs:()=>c,eA:()=>d,lw:()=>f,nN:()=>m});var i=n(353),r=n(768);const o={};let a=null,s=0;async function l(e){const t=await e.getAll("artworks");a=e;for(const e of t)o[e.id]=e}function c(e,t,n){o[e]||(t.id=e,o[e]=t,n&&(clearTimeout(s),s=setTimeout((()=>{!async function(e){const t=a.transaction("artworks","readwrite");await Promise.all([...Object.keys(e).map((n=>{const i=e[n];return i.original.blob||i.small.blob?null:t.store.put(i)})),t.done])}(o)}),2e3)))}function d(e){if(e){const t=o[e];if(!t)return u();const{original:n,small:i}=t;return n.blob&&!n.url&&(n.url=URL.createObjectURL(n.blob)),i?i.blob&&!i.url&&(i.url=URL.createObjectURL(i.blob)):t.small={url:n.url},t}return u()}function u(){const e="assets/images/album-art-placeholder.png";return{isPlaceholder:!0,original:{url:e},small:{url:e}}}function f(e){const t="assets/images/album-art-placeholder.png";if(!e.length)return[t];const n=e.reduce(((e,t)=>(t.artworkId&&e.push(t),e)),[]);if(!n.length)return[t];const r=[];for(const e of(0,i.Sy)(n)){if(4===r.length)break;r.includes(e.artworkId)||r.push(e.artworkId)}return r.map((e=>d(e).small.url))}async function m(e){const t=Object.values(e).reduce(((e,t)=>e.concat(t.tracks)),[]).map((e=>e.artworkId)).reduce(((e,t)=>(e[t]=e[t]?e[t]+1:1,e)),{}),n=(0,r.t7)(),i=a.transaction("artworks","readwrite"),s=[];for(const e of Object.keys(o))t[e]||(n?.artworkId!==e&&delete o[e],s.push(i.store.delete(e)));Promise.all([...s,i.done])}},768:(e,t,n)=>{n.d(t,{tW:()=>ue,Rz:()=>G,cI:()=>U,t7:()=>Y,$9:()=>B,ao:()=>me,cg:()=>pe,gf:()=>D,RX:()=>X,YI:()=>Z,TY:()=>fe,CF:()=>te,vR:()=>re,MP:()=>ee,ax:()=>ie,Kp:()=>ne,qK:()=>z,d$:()=>ae,wc:()=>ce,Ml:()=>K,X5:()=>_,Q7:()=>Q,jA:()=>de,xW:()=>oe,Gj:()=>le,Xh:()=>se,ZO:()=>W});var i=n(353),r=n(255),o=n(406),a=n(676),s=n(322),l=n(585),c=n(179);let d,u,f=0;function m(e,t,n){f=n||0,d=URL.createObjectURL(e.audioTrack),u=new Audio(d),u.onplaying=function(){(0,i.hb)("player-state",{loading:!1})},u.ontimeupdate=function(){u.currentTime-f>=1&&(f=Math.round(u.currentTime),(0,i.hb)("current-time-update",f))},u.onended=function(){(0,i.hb)("track-end")},p(t),"number"!=typeof n?u.play():v(n)}function p(e){u.volume=e}function v(e){u.currentTime=e,f=e}let h=null,y=null,b=!1,g=!1,w=!1,k=0,x=0,T=null;function j({data:e}){let t=null;clearTimeout(k),3===e?t={loading:!0}:1===e?(t={loading:!1,paused:!1},S(performance.now(),Math.round(h.getCurrentTime()))):2===e&&(t={loading:!1,paused:!0}),t&&(0,i.hb)("player-state",t)}function I(){const{track:e,volume:t,startTime:n}=y,i=x||n;x=0,b=!0,A(t),i>0?w?(y=null,h.loadVideoById(e.id,i)):(g=!0,h.cueVideoById(e.id,i)):$(e,t)}function E(e){let t="";if(100===e.data?t="Video is either removed or marked as private":101!==e.data&&150!==e.data||(t="The owner of the requested video does not allow it to be played in embedded players"),console.log(e),t){const e=U(),{id:n}=me(1,e);T.id===n?le():(0,i.hb)("track-end"),(0,i.hb)("notification",{value:t})}}function S(e,t,n=0){const r=performance.now()-e-n;t<T.durationInSeconds?(t+=1,(0,i.hb)("current-time-update",t)):(0,i.hb)("track-end"),k=setTimeout((()=>{S(e,t,n+1e3)}),1e3-r)}function L(){h=new YT.Player("js-youtube-player",{playerVars:{autoplay:0,modestbranding:1,disablekb:1,controls:0,fs:0,rel:0,iv_load_policy:3},events:{onReady:I,onStateChange:j,onError:E}})}function N(e){b?(g=!1,e?h.playVideo():h.pauseVideo()):w=e}function $(e,t,n){T=e,b?h.loadVideoById(e.id,n):(document.getElementById("js-youtube-player-container").insertAdjacentHTML("beforeend",'\n    <div id="js-youtube-player" class="youtube-player"></div>\n  '),y={track:e,volume:t,startTime:n},window.onYouTubeIframeAPIReady=L,i.Vs.load({src:"https://www.youtube.com/iframe_api"}))}function P(){b&&(g=!1,y=null,T=null,h.stopVideo())}function A(e){b&&h.setVolume(100*e)}let O="",C=null,M=!0,H=[],R=-1,q=!1;const V=[];function z(e){V.push(e)}function B(){return V}function K(e){O=e}function U(){return O}function Y(){return C}function W(e,t){if(C&&t===O){const n=e.find((({id:e})=>e===C.id)),i=n?n.index:-1;C.index=i,F(i,t)}}function D(){return R}function F(e,t){let n=-1;if((0,r.$8)("shuffle"))n=e;else{const{sortOrder:i}=(0,s.mP)(t);n=i.indexOf(e)}R=H.indexOf(n),R=R<0?-1:R}function Z(){return M}function Q(e){M=e,navigator.mediaSession.playbackState=M?"paused":"playing"}function X(){return H}function _(e,t=-1){const n=(0,r.$8)("shuffle"),{tracks:o}=(0,s.hT)(e),a=o.map((({index:e})=>e));H=n?(0,i.Sy)(a):a,V.length=0,n&&t>=0&&function(e){for(let t=0;t<H.length;t++)if(H[t]===e){[H[0],H[t]]=[e,H[0]];break}}(t),W(o,e)}function G(){q=!0}function J(){(0,i.hb)("current-time-update",0),(0,a.Rh)(),function(e){"native"===e?(u.pause(),u.ontimeupdate=null,u.onended=null,u.onplaying=null,u.currentTime=0,u=null,d&&(URL.revokeObjectURL(d),d=null)):"youtube"===e&&P()}(C.player)}function ee(e,{scrollToTrack:t}={}){C&&J(),_(e);const n=pe(0,e);n?oe(n,e,{scrollToTrack:t}):le()}function te(e,t){C&&J();(0,c.cV)()&&(0,c.ge)(null),0!==H.length&&t===O||_(t,e);oe((0,s.hT)(t).tracks[e],t)}function ne(e,t){if(C){(0,c.cV)()||(0,c.ge)({playlistId:O,track:C}),J()}oe(e,t,{scrollToTrack:!0})}function ie({scrollToTrack:e}={}){C&&J();const t=(0,c.cV)();if(t){const{track:n,playlistId:i}=t;return oe(n,i,{scrollToTrack:e}),void(0,c.ge)(null)}q&&(q=!1,_(O));const n=me(-1,O);n&&oe(n,O,{scrollToTrack:!0})}function re(e,{scrollToTrack:t}={}){const n=(0,c.cV)();if(C&&(!n&&e&&(0,c.ge)({playlistId:O,track:C}),J()),e){const{track:i,playlistId:r}=e;return void oe(i,r,{queueStart:n,scrollToTrack:t})}n&&(O=n.playlistId,(0,c.ge)(null)),q&&(q=!1,_(O));const i=me(1,O);i?oe(i,O,{scrollToTrack:t}):le()}async function oe(e,t,{queueStart:s,currentTime:c,scrollToTrack:d,willPlay:u=!0}={}){if(e.needsMetadata){(0,i.hb)("player-state",{loading:!0});const{updateTrackWithMetadata:t}=await n.e(810).then(n.bind(n,810));e=await t(e)}s||F(e.index,t),function(e){C=e}(e),(0,a.ul)(e.index,t,d),u&&(0,i.hb)("track-start",{track:e,playlistId:t}),function(e){if("youtube"!==e.player){const{original:t,small:n,type:i}=(0,l.eA)(e.artworkId);navigator.mediaSession.metadata=new MediaMetadata({title:e.title,artist:e.artist,album:e.album,artwork:[{src:t.url,sizes:"512x512",type:i},{src:n.url,sizes:"256x256",type:i},{src:n.url,sizes:"128x128",type:i}]})}}(e),function(e,t){const n=(0,r.$8)("volume");"native"===e.player?m(e,n,t):"youtube"===e.player&&$(e,n,t)}(e,c),"native"===e.player?o.T1():s?o.SN({trackId:s.track.id,currentTime:0,playlistId:s.playlistId}):o.SN({trackId:e.id,currentTime:c||0,playlistId:t})}function ae(){te(C.index,O)}function se(){const{player:e}=C;"native"===e?function(e){e?u.play():u.pause()}(M):"youtube"===e&&N(M)}function le(){C&&J(),O="",C=null,M=!0,navigator.mediaSession.playbackState="none",o.T1(),(0,i.hb)("reset-player")}function ce(e){C&&("native"===C.player&&v(e),"youtube"===C.player&&function(e){b?g?h.cueVideoById(y.track.id,e):(clearTimeout(k),h.seekTo(e,!0)):x=e}(e))}function de(e){C&&("native"===C.player?p(e):"youtube"===C.player&&A(e))}function ue(e){return(0,s.hT)(e)?.tracks.length>0}function fe(){return R===H.length-1}function me(e,t){let n=pe(e,t,!0);if(!n)return null;let i=e;for(;V.includes(n.index);)i+=e,n=pe(i,t,!0);return n}function pe(e,t,n){const i=function(e,t=!1){let n=R;return n+=e,0===e?n=0:n>=H.length?t?n-=H.length:n=0:-1===n&&(n=H.length-1),H[n]}(e,n),{tracks:o}=(0,s.hT)(t);if((0,r.$8)("shuffle"))return o[i];const{sortOrder:a}=(0,s.mP)(t);return o[a[i]]}},106:(e,t,n)=>{n.d(t,{Uk:()=>h,Kh:()=>y,Mt:()=>j,YP:()=>M,eD:()=>I,GM:()=>C,wR:()=>H});var i=n(353),r=n(322),o=n(676);let a={},s={},l=-1,c=!1,d=null,u=null,f=0,m=0,p=0,v=!1;function h(e,{viewMode:t,tracks:n}){y(),n.length&&(a.offsetY="grid"===t?0:40,a.element=e,e.addEventListener("pointerdown",b))}function y(){a.element&&(l=-1,a.element.removeEventListener("pointerdown",b),a={})}function b(e){if(1!==e.which)return;const t=window.matchMedia("(hover: hover) and (pointer: fine)").matches;if(window.removeEventListener("pointerup",k),t){if(e.target.closest(".artwork-btn"))return(0,i.hb)("selection",!1),void E();n=e.currentTarget,a.rect={top:n.offsetTop,left:n.offsetLeft,width:n.clientWidth-1,height:n.offsetHeight,scrollHeight:n.scrollHeight};const t={};t.x=e.clientX-a.rect.left,t.y=e.currentTarget.scrollTop+e.clientY-a.rect.top,t.x<a.rect.width&&t.y>e.currentTarget.scrollTop+a.offsetY&&(s.startingPoint=t,window.addEventListener("pointermove",g),window.addEventListener("pointerup",w))}else{if(window.addEventListener("contextmenu",x,{once:!0}),e.target.closest(".artwork-btn"))return v=!1,(0,i.hb)("selection",!1),E(),void window.removeEventListener("pointerup",k);if(v){const t=e.target.closest(".track");t&&S(t,!0)}else window.addEventListener("pointercancel",T,{once:!0}),window.addEventListener("pointerup",T,{once:!0}),p=setTimeout((()=>{const t=e.target.closest(".track");t&&(S(t,!0),v=!0)}),1e3)}var n}function g(e){c||(c=!0,f=requestAnimationFrame((()=>{const{top:t,left:n,width:r,height:o,scrollHeight:l}=a.rect,f=e.clientY-t;if(d={x:L(e.clientX-n,{min:0,max:r}),y:L(a.element.scrollTop+f,{min:a.offsetY,max:l})},s.element)if(N(),$(e.ctrlKey),m)f>a.offsetY&&f<o&&P();else{let t=null;f>o&&d.y<l?t=A:f<a.offsetY&&d.y>a.offsetY&&(t=O),t&&(m=setInterval(t,40,e.ctrlKey))}else((p=d).x>s.startingPoint.x+2||p.x<s.startingPoint.x-2||p.y>s.startingPoint.y+2||p.y<s.startingPoint.y-2)&&(!function(){const{children:e}=a.element.lastElementChild;u=Array.from(e).map((e=>{const t=e.offsetTop,n=e.offsetLeft;return{elementRef:e,top:t,left:n,right:n+e.offsetWidth,bottom:t+e.offsetHeight}}))}(),s.area={top:s.startingPoint.y,left:s.startingPoint.x},a.element.insertAdjacentHTML("afterbegin",`\n    <div class="selection-area" style="top: ${s.startingPoint.y}px; left: ${s.startingPoint.x}px"></div>\n  `),s.element=a.element.firstElementChild,e.ctrlKey||E(),window.removeEventListener("pointerup",k),(0,i.hb)("selection",!1));var p;c=!1})))}function w({target:e,ctrlKey:t,shiftKey:n}){if(f&&(cancelAnimationFrame(f),f=0,c=!1,m&&P()),s.element){const e=I();l=-1,s.element.remove(),s={},u.length=0,e.length&&(window.addEventListener("pointerup",k),(0,i.hb)("selection",!0))}else{const r=e.closest(".track");if(r){let e=0;for(const t of r.parentElement.children){if(t===r)break;e+=1}n&&-1!==l?l>=0&&l!==e&&function(e,t,n){const{children:i}=a.element.lastElementChild;e>t&&([e,t]=[t,e]);const r=[...i].slice(e,t+1);n||E();for(const e of r)e.classList.add("selected")}(l,e,t):(l=e,S(r,t))}else t||(l=-1,E(),(0,i.hb)("selection",!1))}window.removeEventListener("pointermove",g),window.removeEventListener("pointerup",w)}function k({target:e}){e.closest(".playlist-view")||e.closest(".js-selection-btn")||(v=!1,window.removeEventListener("pointerup",k),(0,i.hb)("selection",!1),E())}function x(e){e.preventDefault()}function T(){clearTimeout(p)}function j(){v=!1,E(),window.removeEventListener("pointerup",k)}function I(){return a.element.querySelectorAll(".track.selected")}function E(){const e=I();for(const t of e)t.classList.remove("selected")}function S(e,t){if(t||E(),e.classList.toggle("selected"),e.classList.contains("selected"))(0,i.hb)("selection",!0),window.addEventListener("pointerup",k);else{0===I().length&&(v=!1,(0,i.hb)("selection",!1),window.removeEventListener("pointerup",k))}}function L(e,{min:t,max:n}){return e>n?n:e<t?t:e}function N(){const e=s.element.style;let t=d.x-s.startingPoint.x,n=d.y-s.startingPoint.y;if(t<0){const n=s.startingPoint.x+t;t*=-1,s.area.left=n,e.left=`${n}px`}else s.area.left!==s.startingPoint.x&&(s.area.left=s.startingPoint.x,e.left=`${s.startingPoint.x}px`);if(n<0){let t=s.startingPoint.y+n;t<a.offsetY&&(t=a.offsetY),n*=-1,s.area.top=t,e.top=`${t}px`}else s.area.top!==s.startingPoint.y&&(s.area.top=s.startingPoint.y,e.top=`${s.startingPoint.y}px`);s.area.right=s.area.left+t,s.area.bottom=s.area.top+n,e.width=`${t}px`,e.height=`${n}px`}function $(e){for(const t of u){const n=t.elementRef.classList;s.area.right>t.left&&s.area.left<t.right&&s.area.bottom>t.top&&s.area.top<t.bottom?(e&&!t.selected&&n.contains("selected")&&(n.remove("selected"),t.removed=!0),t.removed||(n.add("selected"),t.selected=!0)):t.selected?(n.remove("selected"),t.selected=!1):t.removed&&(n.add("selected"),t.removed=!1)}}function P(){clearInterval(m),m=0}function A(e){const{scrollHeight:t,height:n}=a.rect;a.element.scrollTop+=36,d.y=a.element.scrollTop+n,d.y>=t&&(d.y=t,P()),N(),$(e)}function O(e){a.element.scrollTop-=36,d.y=a.element.scrollTop,d.y<=0&&(d.y=0,P()),N(),$(e)}function C(){const e=(0,o.SI)()?".track:not(.hidden)":".track",t=a.element.querySelectorAll(e);if(t.length){for(const e of t)e.classList.add("selected");return window.addEventListener("pointerup",k),!0}}function M(e){return[...e].map((e=>Number(e.getAttribute("data-index"))))}function H(e,{id:t,viewMode:n}){!function(e){for(const t of e)t.remove()}(e),function(e,t){const{sortOrder:n}=(0,r.mP)(e),{children:i}=a.element.lastElementChild;for(let e=0;e<i.length;e+=1){const r=i[e],o=n[e];if("grid"!==t){const t=r.querySelector(".track-index");t&&(t.textContent=e+1)}r.setAttribute("data-index",o)}}(t,n),window.removeEventListener("pointerup",k)}},676:(e,t,n)=>{n.d(t,{HR:()=>f,z4:()=>v,yW:()=>h,U:()=>w,tI:()=>k,gI:()=>x,SI:()=>T,BM:()=>j,xU:()=>I,ul:()=>S,Rh:()=>O,IB:()=>C,Bv:()=>$,Ne:()=>P,_k:()=>M,O9:()=>q});var i=n(322),r=n(106),o=n(768),a=n(585);let s=null,l=null,c="",d="",u=null;function f(){return c}function m(e){e.forEach((({isIntersecting:e,target:t})=>{const{id:n,tracks:r,viewMode:o}=(0,i.hT)(c),s=r[Number(t.getAttribute("data-index"))];t.innerHTML=e?function(e,t,n){if("grid"===n)return function(e,t){const{title:n,id:i}=R(e.index,t);return`\n    <div class="artwork-container grid-item-thumbnail">\n      <img src="${(0,a.eA)(e.artworkId).small.url}" class="artwork" alt="">\n      <button class="btn icon-btn artwork-btn" title="${n}">\n        ${y({iconId:i,className:"artwork-btn-icon"})}\n      </button>\n    </div>\n    ${function(e){return`\n    <div class="track-info">\n      <div class="track-info-item track-title multiline">${e.title}</div>\n      ${e.artist?`<div class="track-info-item">${e.artist}</div>`:""}\n      <div class="track-info-item-duration">${e.duration}</div>\n    </div>\n  `}(e)}\n  `}(e,t);if("compact"===n)return function(e,t){const{title:n,id:r}=R(e.index,t),{sortOrder:o}=(0,i.mP)(t);return`\n    <div class="track-first-col">\n      <div class="track-index">${o.indexOf(e.index)+1}</div>\n      <button class="btn icon-btn artwork-btn" title="${n}">\n        ${y({iconId:r,className:"artwork-btn-icon"})}\n      </button>\n    </div>\n    <div class="artwork-container compact-item-thumbnail">\n      <img src="${(0,a.eA)(e.artworkId).small.url}" class="artwork" alt="">\n    </div>\n    ${function(e){return`\n    <div class="track-info">\n      <div class="track-info-item track-title${e.artist?"":" multiline"}">${e.title}</div>\n      ${e.artist?`<div class="track-info-item">${e.artist}</div>`:""}\n    </div>\n  `}(e)}\n    <div class="track-col">${e.album}</div>\n    <div class="track-last-col">${e.duration}</div>\n  `}(e,t);return function(e,t){const{sortOrder:n}=(0,i.mP)(t),r=n.indexOf(e.index),{title:o,id:a}=R(e.index,t);return`\n    <div class="track-first-col">\n      <div class="track-index">${r+1}</div>\n      <button class="btn icon-btn artwork-btn" title="${o}">\n        ${y({iconId:a,className:"artwork-btn-icon"})}\n      </button>\n    </div>\n    <div class="track-col">${e.title}</div>\n    <div class="track-col">${e.artist}</div>\n    <div class="track-col">${e.album}</div>\n    <div class="track-last-col">${e.duration}</div>\n  `}(e,t)}(s,n,o):g(s,o)}))}function p(e){l&&l.disconnect(),l=new IntersectionObserver(m,{root:e,rootMargin:"200px 0px"});const{children:t}=e.lastElementChild;Array.from(t).forEach((e=>{l.observe(e)}))}function v(e,t){const{children:n}=l.root.lastElementChild,{sortOrder:r}=(0,i.mP)(t),o=n[r.indexOf(e.index)];if(o)l.unobserve(o),l.observe(o);else{const r=(0,i.hT)(t);!function(e,t,n){const i=b(e,n);t.insertAdjacentHTML("beforeend",i)}(e,l.root.lastElementChild,r),l.observe(n[n.length-1])}}function h(){l&&(l.disconnect(),l=null),c="",d="",s=null,(0,r.Kh)()}function y(e){return`\n    <svg viewBox="0 0 24 24"${e.elementId?` id=${e.elementId}`:""}${e.className?` class="${e.className}"`:""}>\n      ${e.title?`<title>${e.title}</title>`:""}\n      <use href="#${e.iconId}"></use>\n    </svg>\n  `}function b(e,{id:t,viewMode:n}){const i=g(e,n);let r="";if(d){const t=new RegExp(`(${d})`,"i"),n=t.test(e.title)||t.test(e.artist)||t.test(e.album);console.log(e),n||(r+=" hidden")}if(u){let n=t,i=e.index;"search"===t&&(n=e.playlistId,i=e.playlistIndex),u.playlistId===n&&u.index===i&&(r+=" playing")}return`<li class="track ${n}-item${r}" data-index="${e.index}">${i}</li>`}function g(e,t){return"grid"===t?'\n    <div class="artwork-container grid-item-thumbnail placeholder"></div>\n    <div class="grid-item-info-placeholder">\n      <div class="grid-item-title-placeholder"></div>\n      <div class="grid-item-artist-placeholder"></div>\n      <div class="grid-item-duration-placeholder"></div>\n    </div>\n  ':"compact"===t?function(e){return`\n    <div class="track-first-col">\n      <div class="track-index-placeholder"></div>\n    </div>\n    <div class="artwork-container compact-item-thumbnail"></div>\n    <div class="track-col">\n      <div class="compact-item-title-placeholder"></div>\n      <div class="compact-item-artist-placeholder"></div>\n    </div>\n    <div class="track-col">\n      ${e.album?'<div class="track-col-inner"></div>':""}\n    </div>\n    <div class="track-last-col">\n      <div class="track-duration-placeholder"></div>\n    </div>\n  `}(e):function(e){return`\n    <div class="track-first-col">\n      <div class="track-index-placeholder"></div>\n    </div>\n    <div class="track-col">\n      <div class="track-col-inner"></div>\n    </div>\n    <div class="track-col">\n      ${e.artist?'<div class="track-col-inner"></div>':""}\n    </div>\n    <div class="track-col">\n      ${e.album?'<div class="track-col-inner"></div>':""}\n    </div>\n    <div class="track-last-col">\n      <div class="track-duration-placeholder"></div>\n    </div>\n  `}(e)}function w(e,t){const n=function(e){const{id:t,tracks:n}=e,{sortOrder:r}=(0,i.mP)(t);let o="";for(const t of r)o+=b(n[t],e);return o}(t);s=e,c=t.id,"grid"===t.viewMode?e.innerHTML=`<ul id="js-${t.id}" class="playlist-items grid-items">${n}</ul>`:"compact"===t.viewMode?e.innerHTML=function(e,t){return`\n  <ul class="playlist-view-header">\n    <li class="track-first-col">#</li>\n    <li class="compact-item-second-col">TITLE</li>\n    <li class="track-col">ALBUM</li>\n    <li class="track-last-col">DURATION</li>\n  </ul>\n  <ul id="js-${e}" class="playlist-items compact-items">${t}</ul>\n  `}(t.id,n):"minimal"===t.viewMode&&(e.innerHTML=function(e,t){return`\n  <ul class="playlist-view-header">\n    <li class="track-first-col">#</li>\n    <li class="track-col">TITLE</li>\n    <li class="track-col">ARTIST</li>\n    <li class="track-col">ALBUM</li>\n    <li class="track-last-col">DURATION</li>\n  </ul>\n  <ul id="js-${e}" class="playlist-items minimal-items">${t}</ul>\n  `}(t.id,n)),p(e),(0,r.Uk)(e,t)}function k(e,t,n){const i=e.reduce(((e,t)=>e+b(t,n)),"");t.lastElementChild.insertAdjacentHTML("beforeend",i),p(t),(0,r.Uk)(t,n)}function x(e){d=e}function T(){return d}function j(e){const{tracks:t,id:n}=(0,i.hT)(c);if(e){if(!t.length)return;const{children:r}=document.getElementById(`js-${n}`),{sortOrder:o}=(0,i.mP)(n),a=new RegExp(`(${e})`,"i");let s=!1;for(const e of t){const t=a.test(e.title)||a.test(e.artist)||a.test(e.album),n=o.indexOf(e.index);t&&(s=!0),r[n].classList.toggle("hidden",!t)}return s}return I(n),!0}function I(e){const t=document.getElementById(`js-${e}`).querySelectorAll(".hidden");for(const e of t)e.classList.remove("hidden")}function E(e,t){if(t===c){const{sortOrder:n}=(0,i.mP)(t),r=n.indexOf(e);return document.getElementById(`js-${t}`).children[r]}}function S(e,t,n){if(e>=0){const i=E(e,t);if(u={index:e,playlistId:t},i)i.classList.add("playing"),n&&q(t);else{const e=A();e&&e.classList.add("playing")}}else u=null}function L(e){if(!e)return;e.querySelector(".play-pause-btn-spinner")||e.insertAdjacentHTML("beforeend",'\n    <svg viewBox="0 0 100 100" class="play-pause-btn-spinner">\n      <use href="#spinner"/>\n    </svg>\n  ')}function N(e){if(!e)return;const t=e.querySelector(".play-pause-btn-spinner");t&&t.remove()}function $(){if(u){const e=E(u.index,u.playlistId);if(e)L(e.querySelector(".icon-btn"));else{const e=A();e&&L(e.querySelector(".icon-btn"))}}}function P(){if(u){const e=E(u.index,u.playlistId);if(e)N(e.querySelector(".icon-btn"));else{const e=A();e&&N(e.querySelector(".icon-btn"))}}}function A(){const e=(0,i.hT)("search");if(!e)return;const t=document.getElementById("js-search");for(const n of t.children){const t=e.tracks[n.getAttribute("data-index")];if(u.index===t.playlistIndex&&u.playlistId===t.playlistId)return n}}function O(){C(!0),P(),function(){if(u){const e=E(u.index,u.playlistId);if(e)e.classList.remove("playing");else{const e=A();e&&e.classList.remove("playing")}u=null}}()}function C(e){if(!c)return;const t=function(){if(u){const e=E(u.index,u.playlistId);if(e)return e.querySelector(".icon-btn")}}();if(t)H(t,e);else{const t=A();t&&H(t.querySelector(".artwork-btn"),e)}}function M(e){return e?{id:"play-circle",title:"Play"}:{id:"pause-circle",title:"Pause"}}function H(e,t){const{id:n,title:i}=M(t);"svg"===e.nodeName?e.querySelector("title").textContent=i:e.setAttribute("title",i),e.querySelector("use").setAttribute("href",`#${n}`)}function R(e,t){if(t!==(0,o.cI)())return M(!0);const n=(0,o.t7)(),i=(0,o.YI)();return n&&n.index===e?M(i):M(!0)}function q(e){(0,o.cI)()===e?u&&s&&requestAnimationFrame((()=>{const{clientHeight:e,scrollTop:t}=s,{offsetHeight:n,offsetTop:i}=E(u.index,u.playlistId);(i-n<t||i>t+e)&&(s.scrollTop=i-e/2)})):s&&requestAnimationFrame((()=>{s.scrollTop=0}))}},322:(e,t,n)=>{n.d(t,{Sf:()=>s,$F:()=>l,hT:()=>c,mP:()=>d,cg:()=>u,CE:()=>f,_j:()=>p,vg:()=>v,Yr:()=>g,jg:()=>y});var i=n(585);const r={},o={};let a=null;async function s(e){const t=(await e.getAll("playlists")).sort(((e,t)=>e.createdAt-t.createdAt));a=e;for(const e of t)r[e.id]=e,o[e.id]={},e.tracks.length?(o[e.id].duration=h(e.tracks),o[e.id].thumbnail=(0,i.lw)(e.tracks),g(e)):(o[e.id].duration="0 hr 0 min",o[e.id].thumbnail=["assets/images/album-art-placeholder.png"],o[e.id].sortOrder=[])}function l(){return{...r}}function c(e){return r[e]}function d(e){return o[e]}function u(e){const t={tracks:[],createdAt:Date.now(),sortBy:"index",sortOrder:1,...e};return o[t.id]={thumbnail:["assets/images/album-art-placeholder.png"],duration:"0 hr 0 min",sortOrder:[]},t.tracks.length&&(o[t.id].duration=h(t.tracks),o[t.id].thumbnail=(0,i.lw)(t.tracks),"search"!==t.id&&(t.tracks=y(t.tracks)),g(t)),r[t.id]=t,"local-files"!==t.id&&"search"!==t.id&&a.put("playlists",t),t}function f(e,t,n=!0){return r[e]={...r[e],...t},t.tracks&&(o[e].duration=h(t.tracks),n&&(o[e].thumbnail=(0,i.lw)(t.tracks)),g(r[e])),"local-files"!==e&&"search"!==e&&(m(e,t),(0,i.nN)(r)),r[e]}async function m(e,t){const n=await a.get("playlists",e);Object.keys(t).forEach((e=>{n[e]=t[e]})),a.put("playlists",n)}function p(e,t,n=!0){const i=r[e],a=y(t,i.tracks.length),s=a.map((e=>e.index));return i.tracks=i.tracks.concat(a),o[e].sortOrder=o[e].sortOrder.concat(s),n&&"local-files"!==e&&m(e,{tracks:i.tracks}),i.tracks}function v(e){return delete r[e],delete o[e],"local-files"!==e&&"search"!==e&&((0,i.nN)(r),a.delete("playlists",e)),r}function h(e){const t=function(e){return e.reduce(((e,t)=>e+t.durationInSeconds),0)}(e);let n=Math.floor(t/3600),i=Math.ceil(t/60%60);return 60===i&&(i=0,n+=1),`${n} hr ${i} min`}function y(e,t=0){return e.map(((e,n)=>(e.index=t+n,e)))}function b(e,t){return"index"===e?t.index:"duration"===e?t.durationInSeconds:t[e].toLowerCase().replace(/[^\w\s]/gi,"")}function g({id:e,tracks:t,sortBy:n,sortOrder:i}){o[e].sortOrder=function(e,t,n){return[...e].sort(((e,i)=>{const r=b(t,e),o=b(t,i);return r<o?-n:r>o?n:0})).map((({index:e})=>e))}(t,n,i)}},179:(e,t,n)=>{n.d(t,{cV:()=>o,ge:()=>a,$m:()=>s,xo:()=>l,VR:()=>c,$b:()=>d,Yt:()=>u});let i=[],r=null;function o(){return r}function a(e){r=e}function s(){const e=i.shift();return e?{queue:i,track:e.track,playlistId:e.playlistId}:null}function l(e){const t=i[e];return i=i.slice(e+1),{queue:i,track:t.track}}function c(e){return i=i.concat(e),i}function d(e){return i.splice(e,1),i}function u(){i.length=0}},406:(e,t,n)=>{n.d(t,{OE:()=>r,SN:()=>o,T1:()=>a});let i=JSON.parse(localStorage.getItem("track"));function r(){return i}function o(e,t=!0){i={...i,...e},t&&localStorage.setItem("track",JSON.stringify(i))}function a(){i=null,localStorage.removeItem("track")}},255:(e,t,n)=>{n.d(t,{Sl:()=>o,Lt:()=>a,$8:()=>s,Wf:()=>l});const i=Object.assign({repeat:"repeat-off",shuffle:!1,mute:!1,volume:.33},JSON.parse(localStorage.getItem("veery-settings"))||{});let r=0;function o(){Object.assign(i,{repeat:"repeat-off",shuffle:!1,mute:!1,volume:.2})}function a(e,t){i[e]=t,c(i)}function s(e){return i[e]}function l(e){delete i[e],c(i)}function c(e){clearTimeout(r),r=setTimeout((()=>{localStorage.setItem("veery-settings",JSON.stringify(e))}),2e3)}},353:(e,t,n)=>{n.d(t,{hb:()=>r,AK:()=>o,mr:()=>s,Sy:()=>l,zO:()=>c,Vs:()=>i});const i=function(){const e=[];return{load:function(t){return e.includes(t.src)?Promise.resolve():new Promise((n=>{const i=document.createElement("script");Object.keys(t).forEach((e=>{i.setAttribute(e,t[e])})),document.getElementsByTagName("body")[0].appendChild(i),e.push(t.src),i.onload=n}))}}}();function r(e,t){const n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)}function o(...e){return e.join(" ").trimEnd()}function a(e,t=!0){return t&&e<10?`0${e}`:e}function s(e,t=!1){const n=function(e){return Math.floor(e/3600)}(e),i=function(e){return Math.floor(e/60%60)}(e),r=function(e){return e%60}(e);return`${(t=t||n)?`${n}:`:""}${a(i,t)}:${a(r)}`}function l(e){let t=e.length;for(;t;){const n=Math.floor(Math.random()*t);t-=1,[e[t],e[n]]=[e[n],e[t]]}return e}function c(e=8){return Math.random().toString(32).slice(2,2+e)}}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return o[e](n,n.exports,s),n.exports}s.m=o,e=[],s.O=(t,n,i,r)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){for(var[n,i,r]=e[d],a=!0,l=0;l<n.length;l++)(!1&r||o>=r)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(a=!1,r<o&&(o=r));if(a){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,i,r]},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>e+".js",s.miniCssF=e=>e+".css",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},n="veery:",s.l=(e,i,r,o)=>{if(t[e])t[e].push(i);else{var a,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==n+r){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",n+r),a.src=e),t[e]=[i];var f=(n,i)=>{a.onerror=a.onload=null,clearTimeout(m);var r=t[e];if(delete t[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(i))),n)return n(i)},m=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),l&&document.head.appendChild(a)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),i=e=>new Promise(((t,n)=>{var i=s.miniCssF(e),r=s.p+i;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var r=(a=n[i]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(r===e||r===t))return a}var o=document.getElementsByTagName("style");for(i=0;i<o.length;i++){var a;if((r=(a=o[i]).getAttribute("data-href"))===e||r===t)return a}})(i,r))return t();((e,t,n,i)=>{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.onerror=r.onload=o=>{if(r.onerror=r.onload=null,"load"===o.type)n();else{var a=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=s,r.parentNode.removeChild(r),i(l)}},r.href=t,document.head.appendChild(r)})(e,r,t,n)})),r={179:0},s.f.miniCss=(e,t)=>{r[e]?t.push(r[e]):0!==r[e]&&{107:1,123:1,184:1,346:1,353:1,455:1,466:1,934:1,974:1}[e]&&t.push(r[e]=i(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))},(()=>{s.b=document.baseURI||self.location.href;var e={179:0};s.f.j=(t,n)=>{var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise(((n,r)=>i=e[t]=[n,r]));n.push(i[2]=r);var o=s.p+s.u(t),a=new Error;s.l(o,(n=>{if(s.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,i[1](a)}}),"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[o,a,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(i in a)s.o(a,i)&&(s.m[i]=a[i]);if(l)var d=l(s)}for(t&&t(n);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[o[c]]=0;return s.O(d)},n=globalThis.webpackChunkveery=globalThis.webpackChunkveery||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=s.O(void 0,[736],(()=>s(682)));l=s.O(l)})();