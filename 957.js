"use strict";(globalThis.webpackChunkveery=globalThis.webpackChunkveery||[]).push([[957],{957:(e,n,t)=>{t.r(n),t.d(n,{default:()=>m});var i=t(540),s=t(295),l=t(719),a=t(191),c=t(855),r=t(440),u=t(244),o=t(400),d=t(123),h=t(848);const m=function({nowPlayingVisible:e,youtubePlayerMaximized:n,toggleQueue:t}){const{queue:m,dequeueTrack:x,resetQueue:b}=(0,l.x)(),{paused:j,activeTrack:k,trackLoading:f,activePlaylistId:p,togglePlay:N,playAtIndex:v,playQueueTrack:y}=(0,s.F)(),[g,w]=(0,i.useState)([]),q=(0,i.useRef)(!1);function C(){const e=I((0,a.PL)("repeat"));w(e)}function I(e){const n=[],t=r.Mu(),i=c.MU(),s=i?i.playlistId:p,l=r.gB();let a=i?i.playbackIndex:r.gc(),u=0;for(;n.length<10&&a<t.length;)if(u+=1,"repeat-off"===e){if(a===t.length-1)break;{a+=1;const e=r.jj(u,s);l.includes(e.index)||n.push(e)}}else if("repeat-all"===e){const e=r.jj(u,s,!0);if(!e)break;if(e.id===k.id){if(1===t.length)return[k];break}l.includes(e.index)||n.push(e)}return n}function P(e,n,t,i=null){return(0,h.jsxs)("div",{className:"track queue-track",children:[(0,h.jsxs)("div",{className:"artwork-container",children:[(0,h.jsx)("img",{src:(0,u.TT)(e.artworkId).small.url,className:"artwork",alt:""}),t]}),(0,h.jsxs)("div",{className:"track-info",children:[(0,h.jsx)("div",{className:"track-info-item track-title"+(e.artist?"":" multiline"),children:e.title}),e.artist?(0,h.jsx)("div",{className:"track-info-item",children:e.artist}):null,(0,h.jsx)("div",{className:"track-info-item-duration",children:e.duration})]}),i]},n)}function A(e){const n=(0,h.jsx)("button",{className:"btn icon-btn artwork-btn",onClick:()=>function(e){const n=c.MU(),t=n?n.playlistId:p;v(e.index,t)}(e),title:"Play",children:(0,h.jsx)(d.A,{id:"play-circle",className:"artwork-btn-icon"})}),t=(0,h.jsx)("button",{className:"btn icon-btn queue-item-remove-btn",onClick:()=>function(e){const n=g.findIndex((n=>n.index===e));g.splice(n,1),w([...g]),r.Xv(e),q.current=!1}(e.index),title:"Remove",children:(0,h.jsx)(d.A,{id:"trash"})});return P(e,e.id,n,t)}return(0,i.useEffect)((()=>{if(!k)return void w([]);const e=(0,a.PL)("repeat");if("repeat-one"===e)w([k]);else{const n=I(e);w(n)}return window.addEventListener("shuffle",C),()=>{window.removeEventListener("shuffle",C)}}),[k]),(0,h.jsxs)("div",{className:`queue${e?" transparent":""}${n?" maximized":""}`,children:[(0,h.jsxs)("div",{className:"queue-top",children:[(0,h.jsx)("h3",{className:"queue-title",children:"Queue"}),(0,h.jsx)("button",{className:"btn icon-btn",onClick:t,children:(0,h.jsx)(d.A,{id:"close"})})]}),(0,h.jsxs)("div",{className:"queue-middle",children:[(0,h.jsxs)("div",{className:"queue-section queue-now-playing-section",children:[(0,h.jsx)("div",{className:"queue-section-top",children:(0,h.jsx)("h4",{children:"Now Playing"})}),function(){const{title:e,id:n}=(0,o.OM)(j),t=(0,h.jsxs)("button",{className:"btn icon-btn artwork-btn",onClick:()=>N(k),title:e,children:[(0,h.jsx)(d.A,{id:n,className:"artwork-btn-icon"}),f&&(0,h.jsx)(d.A,{id:"spinner",className:"play-pause-btn-spinner"})]});return P(k,k.id,t)}()]}),m.length?(0,h.jsxs)("div",{className:"queue-section",children:[(0,h.jsxs)("div",{className:"queue-section-top",children:[(0,h.jsx)("h4",{children:"Next In Queue"}),(0,h.jsx)("button",{className:"btn queue-clear-btn",onClick:b,children:"Clear"})]}),m.slice(0,10).map(((e,n)=>function(e,{id:n,playlistId:t,track:i}){return P(i,n,(0,h.jsx)("button",{className:"btn icon-btn artwork-btn",onClick:()=>y(e,t),title:"Play",children:(0,h.jsx)(d.A,{id:"play-circle",className:"artwork-btn-icon"})}),(0,h.jsx)("button",{className:"btn icon-btn queue-item-remove-btn",onClick:()=>x(e),title:"Remove",children:(0,h.jsx)(d.A,{id:"trash"})}))}(n,e)))]}):null,g.length?(0,h.jsxs)("div",{className:"queue-section",children:[(0,h.jsx)("div",{className:"queue-section-top",children:(0,h.jsx)("h4",{children:"Next In Playlist"})}),g.map(A)]}):null]})]})}}}]);