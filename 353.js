"use strict";(globalThis.webpackChunkveery=globalThis.webpackChunkveery||[]).push([[353],{373:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var i=n(294),s=n(29),l=n(139),a=n(255),c=n(179),r=n(768),u=n(585),o=n(676),d=n(461),m=n(893);const x=function({nowPlayingVisible:e,youtubePlayerMaximized:t,toggleQueue:n}){const{queue:x,dequeueTrack:h,resetQueue:b}=(0,l.b)(),{paused:k,activeTrack:j,trackLoading:f,activePlaylistId:p,togglePlay:N,playAtIndex:v,playQueueTrack:y}=(0,s.n)(),[g,q]=(0,i.useState)([]),w=(0,i.useRef)(!1);function C(e,t,n,i=null){return(0,m.jsxs)("div",{className:"track queue-track",children:[(0,m.jsxs)("div",{className:"artwork-container",children:[(0,m.jsx)("img",{src:(0,u.eA)(e.artworkId).small.url,className:"artwork",alt:""}),n]}),(0,m.jsxs)("div",{className:"track-info",children:[(0,m.jsx)("div",{className:"track-info-item track-title"+(e.artist?"":" multiline"),children:e.title}),e.artist?(0,m.jsx)("div",{className:"track-info-item",children:e.artist}):null,(0,m.jsx)("div",{className:"track-info-item-duration",children:e.duration})]}),i]},t)}function I(e){const t=(0,m.jsx)("button",{className:"btn icon-btn artwork-btn",onClick:()=>function(e){const t=c.cV(),n=t?t.playlistId:p;v(e.index,n)}(e),title:"Play",children:(0,m.jsx)(d.Z,{id:"play-circle",className:"artwork-btn-icon"})}),n=(0,m.jsx)("button",{className:"btn icon-btn queue-item-remove-btn",onClick:()=>function(e){const t=g.findIndex((t=>t.index===e));g.splice(t,1),q([...g]),r.qK(e),w.current=!1}(e.index),title:"Remove",children:(0,m.jsx)(d.Z,{id:"trash"})});return C(e,e.id,t,n)}return(0,i.useEffect)((()=>{w.current=!1}),[j]),(0,i.useEffect)((()=>{if(w.current)return;if(w.current=!0,!j)return void q([]);const e=(0,a.$8)("repeat");if("repeat-one"===e)q([j]);else{const t=[],n=r.RX(),i=c.cV(),s=i?i.playlistId:p,l=r.$9();let a=i?i.playbackIndex:r.gf(),u=0;for(;t.length<10&&a<n.length;)if(u+=1,"repeat-off"===e){if(a===n.length-1)break;{a+=1;const e=r.cg(u,s);l.includes(e.index)||t.push(e)}}else if("repeat-all"===e){const e=r.cg(u,s,!0);if(!e)break;if(e.id===j.id){if(1===n.length)return void q([j]);break}l.includes(e.index)||t.push(e)}q(t)}}),[j,g]),(0,m.jsxs)("div",{className:`queue${e?" transparent":""}${t?" maximized":""}`,children:[(0,m.jsxs)("div",{className:"queue-top",children:[(0,m.jsx)("h3",{className:"queue-title",children:"Queue"}),(0,m.jsx)("button",{className:"btn icon-btn",onClick:n,children:(0,m.jsx)(d.Z,{id:"close"})})]}),(0,m.jsxs)("div",{className:"queue-middle",children:[(0,m.jsxs)("div",{className:"queue-section queue-now-playing-section",children:[(0,m.jsx)("div",{className:"queue-section-top",children:(0,m.jsx)("h4",{children:"Now Playing"})}),function(){const{title:e,id:t}=(0,o._k)(k),n=(0,m.jsxs)("button",{className:"btn icon-btn artwork-btn",onClick:()=>N(j),title:e,children:[(0,m.jsx)(d.Z,{id:t,className:"artwork-btn-icon"}),f&&(0,m.jsx)(d.Z,{id:"spinner",className:"play-pause-btn-spinner"})]});return C(j,j.id,n)}()]}),x.length?(0,m.jsxs)("div",{className:"queue-section",children:[(0,m.jsxs)("div",{className:"queue-section-top",children:[(0,m.jsx)("h4",{children:"Next In Queue"}),(0,m.jsx)("button",{className:"btn queue-clear-btn",onClick:b,children:"Clear"})]}),x.slice(0,10).map(((e,t)=>function(e,{id:t,playlistId:n,track:i}){return C(i,t,(0,m.jsx)("button",{className:"btn icon-btn artwork-btn",onClick:()=>y(e,n),title:"Play",children:(0,m.jsx)(d.Z,{id:"play-circle",className:"artwork-btn-icon"})}),(0,m.jsx)("button",{className:"btn icon-btn queue-item-remove-btn",onClick:()=>h(e),title:"Remove",children:(0,m.jsx)(d.Z,{id:"trash"})}))}(t,e)))]}):null,g.length?(0,m.jsxs)("div",{className:"queue-section",children:[(0,m.jsx)("div",{className:"queue-section-top",children:(0,m.jsx)("h4",{children:"Next In Playlist"})}),g.map(I)]}):null]})]})}}}]);