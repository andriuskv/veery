"use strict";(globalThis.webpackChunkveery=globalThis.webpackChunkveery||[]).push([[353],{373:(e,n,t)=>{t.r(n),t.d(n,{default:()=>m});var i=t(294),s=t(29),l=t(139),a=t(255),c=t(179),r=t(768),u=t(585),o=t(676),d=t(461),h=t(893);const m=function({nowPlayingVisible:e,youtubePlayerMaximized:n,toggleQueue:t}){const{queue:m,dequeueTrack:x,resetQueue:b}=(0,l.b)(),{paused:k,activeTrack:f,trackLoading:j,activePlaylistId:p,togglePlay:N,playAtIndex:v,playQueueTrack:y}=(0,s.n)(),[g,q]=(0,i.useState)([]),w=(0,i.useRef)(!1);function C(){const e=I((0,a.$8)("repeat"));q(e)}function I(e){const n=[],t=r.RX(),i=c.cV(),s=i?i.playlistId:p,l=r.$9();let a=i?i.playbackIndex:r.gf(),u=0;for(;n.length<10&&a<t.length;)if(u+=1,"repeat-off"===e){if(a===t.length-1)break;{a+=1;const e=r.cg(u,s);l.includes(e.index)||n.push(e)}}else if("repeat-all"===e){const e=r.cg(u,s,!0);if(!e)break;if(e.id===f.id){if(1===t.length)return[f];break}l.includes(e.index)||n.push(e)}return n}function P(e,n,t,i=null){return(0,h.jsxs)("div",{className:"track queue-track",children:[(0,h.jsxs)("div",{className:"artwork-container",children:[(0,h.jsx)("img",{src:(0,u.eA)(e.artworkId).small.url,className:"artwork",alt:""}),t]}),(0,h.jsxs)("div",{className:"track-info",children:[(0,h.jsx)("div",{className:"track-info-item track-title"+(e.artist?"":" multiline"),children:e.title}),e.artist?(0,h.jsx)("div",{className:"track-info-item",children:e.artist}):null,(0,h.jsx)("div",{className:"track-info-item-duration",children:e.duration})]}),i]},n)}function Z(e){const n=(0,h.jsx)("button",{className:"btn icon-btn artwork-btn",onClick:()=>function(e){const n=c.cV(),t=n?n.playlistId:p;v(e.index,t)}(e),title:"Play",children:(0,h.jsx)(d.Z,{id:"play-circle",className:"artwork-btn-icon"})}),t=(0,h.jsx)("button",{className:"btn icon-btn queue-item-remove-btn",onClick:()=>function(e){const n=g.findIndex((n=>n.index===e));g.splice(n,1),q([...g]),r.qK(e),w.current=!1}(e.index),title:"Remove",children:(0,h.jsx)(d.Z,{id:"trash"})});return P(e,e.id,n,t)}return(0,i.useEffect)((()=>{if(!f)return void q([]);const e=(0,a.$8)("repeat");if("repeat-one"===e)q([f]);else{const n=I(e);q(n)}return window.addEventListener("shuffle",C),()=>{window.removeEventListener("shuffle",C)}}),[f]),(0,h.jsxs)("div",{className:`queue${e?" transparent":""}${n?" maximized":""}`,children:[(0,h.jsxs)("div",{className:"queue-top",children:[(0,h.jsx)("h3",{className:"queue-title",children:"Queue"}),(0,h.jsx)("button",{className:"btn icon-btn",onClick:t,children:(0,h.jsx)(d.Z,{id:"close"})})]}),(0,h.jsxs)("div",{className:"queue-middle",children:[(0,h.jsxs)("div",{className:"queue-section queue-now-playing-section",children:[(0,h.jsx)("div",{className:"queue-section-top",children:(0,h.jsx)("h4",{children:"Now Playing"})}),function(){const{title:e,id:n}=(0,o._k)(k),t=(0,h.jsxs)("button",{className:"btn icon-btn artwork-btn",onClick:()=>N(f),title:e,children:[(0,h.jsx)(d.Z,{id:n,className:"artwork-btn-icon"}),j&&(0,h.jsx)(d.Z,{id:"spinner",className:"play-pause-btn-spinner"})]});return P(f,f.id,t)}()]}),m.length?(0,h.jsxs)("div",{className:"queue-section",children:[(0,h.jsxs)("div",{className:"queue-section-top",children:[(0,h.jsx)("h4",{children:"Next In Queue"}),(0,h.jsx)("button",{className:"btn queue-clear-btn",onClick:b,children:"Clear"})]}),m.slice(0,10).map(((e,n)=>function(e,{id:n,playlistId:t,track:i}){return P(i,n,(0,h.jsx)("button",{className:"btn icon-btn artwork-btn",onClick:()=>y(e,t),title:"Play",children:(0,h.jsx)(d.Z,{id:"play-circle",className:"artwork-btn-icon"})}),(0,h.jsx)("button",{className:"btn icon-btn queue-item-remove-btn",onClick:()=>x(e),title:"Remove",children:(0,h.jsx)(d.Z,{id:"trash"})}))}(n,e)))]}):null,g.length?(0,h.jsxs)("div",{className:"queue-section",children:[(0,h.jsx)("div",{className:"queue-section-top",children:(0,h.jsx)("h4",{children:"Next In Playlist"})}),g.map(Z)]}):null]})]})}}}]);