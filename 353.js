"use strict";(globalThis.webpackChunkveery=globalThis.webpackChunkveery||[]).push([[353],{8353:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});n(6699);var i=n(7294),s=n(6029),l=n(3139),c=n(3255),a=n(6179),r=n(7768),u=n(5585),o=n(3676),d=n(1461),m=n(5893);const h=function({nowPlayingVisible:e,youtubePlayerMaximized:t,toggleQueue:n}){const{queue:h,dequeueTrack:x,resetQueue:b}=(0,l.b)(),{paused:k,activeTrack:j,trackLoading:f,activePlaylistId:N,togglePlay:p,playAtIndex:v,playQueueTrack:g}=(0,s.n)(),[y,q]=(0,i.useState)([]),w=(0,i.useRef)(!1);function C(e,t,n,i=null){return(0,m.jsxs)("div",{className:"track queue-track",children:[(0,m.jsxs)("div",{className:"artwork-container",children:[(0,m.jsx)("img",{src:(0,u.eA)(e.artworkId).small.url,className:"artwork",alt:""}),n]}),(0,m.jsxs)("div",{className:"track-info",children:[(0,m.jsx)("div",{className:"track-info-item track-title"+(e.artist?"":" multiline"),children:e.title}),e.artist?(0,m.jsx)("div",{className:"track-info-item",children:e.artist}):null,(0,m.jsx)("div",{className:"track-info-item-duration",children:e.duration})]}),i]},t)}function I(e){const t=(0,m.jsx)("button",{className:"btn icon-btn artwork-btn",onClick:()=>function(e){const t=a.cV(),n=t?t.playlistId:N;v(e.index,n)}(e),title:"Play",children:(0,m.jsx)(d.Z,{id:"play-circle",className:"artwork-btn-icon"})}),n=(0,m.jsx)("button",{className:"btn icon-btn queue-item-remove-btn",onClick:()=>function(e){const t=y.findIndex((t=>t.index===e));y.splice(t,1),q([...y]),r.qK(e),w.current=!1}(e.index),title:"Remove",children:(0,m.jsx)(d.Z,{id:"trash"})});return C(e,e.id,t,n)}return(0,i.useEffect)((()=>{w.current=!1}),[j]),(0,i.useEffect)((()=>{if(w.current)return;if(w.current=!0,!j)return void q([]);const e=(0,c.$8)("repeat");if("repeat-one"===e)q([j]);else{const t=[],n=r.RX(),i=a.cV(),s=i?i.playlistId:N,l=r.$9();let c=r.gf(),u=0;for(;t.length<10&&c<n.length;)if(u+=1,"repeat-off"===e){if(c===n.length-1)break;{c+=1;const e=r.cg(u,s);l.includes(e.index)||t.push(e)}}else if("repeat-all"===e){const e=r.cg(u,s,!0);if(!e)break;if(e.id===j.id){if(1===n.length)return void q([j]);break}l.includes(e.index)||t.push(e)}q(t)}}),[j,y]),(0,m.jsxs)("div",{className:`queue${e?" transparent":""}${t?" maximized":""}`,children:[(0,m.jsxs)("div",{className:"queue-top",children:[(0,m.jsx)("h3",{className:"queue-title",children:"Queue"}),(0,m.jsx)("button",{className:"btn icon-btn",onClick:n,children:(0,m.jsx)(d.Z,{id:"close"})})]}),(0,m.jsxs)("div",{className:"queue-middle",children:[(0,m.jsxs)("div",{className:"queue-section queue-now-playing-section",children:[(0,m.jsx)("div",{className:"queue-section-top",children:(0,m.jsx)("h4",{children:"Now Playing"})}),function(){const{title:e,id:t}=(0,o._k)(k),n=(0,m.jsxs)("button",{className:"btn icon-btn artwork-btn",onClick:()=>p(j),title:e,children:[(0,m.jsx)(d.Z,{id:t,className:"artwork-btn-icon"}),f&&(0,m.jsx)(d.Z,{id:"spinner",className:"play-pause-btn-spinner"})]});return C(j,j.id,n)}()]}),h.length?(0,m.jsxs)("div",{className:"queue-section",children:[(0,m.jsxs)("div",{className:"queue-section-top",children:[(0,m.jsx)("h4",{children:"Next In Queue"}),(0,m.jsx)("button",{className:"btn queue-clear-btn",onClick:b,children:"Clear"})]}),h.slice(0,10).map(((e,t)=>function(e,{id:t,playlistId:n,track:i}){return C(i,t,(0,m.jsx)("button",{className:"btn icon-btn artwork-btn",onClick:()=>g(e,n),title:"Play",children:(0,m.jsx)(d.Z,{id:"play-circle",className:"artwork-btn-icon"})}),(0,m.jsx)("button",{className:"btn icon-btn queue-item-remove-btn",onClick:()=>x(e),title:"Remove",children:(0,m.jsx)(d.Z,{id:"trash"})}))}(t,e)))]}):null,y.length?(0,m.jsxs)("div",{className:"queue-section",children:[(0,m.jsx)("div",{className:"queue-section-top",children:(0,m.jsx)("h4",{children:"Next In Playlist"})}),y.map(I)]}):null]})]})}}}]);